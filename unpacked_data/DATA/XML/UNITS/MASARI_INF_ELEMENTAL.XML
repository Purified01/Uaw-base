<?xml version="1.0"?>

<Masari_INF_Elemental_XML>

<!-- **************************************************************************************** -->	
<!-- *** UNIT(S) **************************************************************************** -->	
<!-- **************************************************************************************** -->


	<X13_Masari_Units Name="Masari_Elemental">

		<!-- ART -->
		<Land_Model_Name> ZV_Stormchaser.ALO </Land_Model_Name> <!-- DEBUG: STUB SCALE AND MODEL -->
		<Scale_Factor>1.25</Scale_Factor>
		<Loop_Idle_Anim_00>No</Loop_Idle_Anim_00>
    <Icon_Name> i_icon_mv_seeker.tga  </Icon_Name>
    <Text_ID>TEXT_UNIT_MASARI_SEEKER</Text_ID>
		<!-- <SurfaceFX_Name>Generic_Footprint</SurfaceFX_Name> -->
		<Occlusion_Silhouette_Enabled>1</Occlusion_Silhouette_Enabled>
		<Mouse_Collide_Override_Sphere_Radius> 10.0 </Mouse_Collide_Override_Sphere_Radius>
		<Death_Fade_Time>.25</Death_Fade_Time>
		<Death_Persistence_Duration>5</Death_Persistence_Duration><!-- jdg originally 10 -->
		
		<!-- INTERFACE -->
		<Select_Box_Scale>20</Select_Box_Scale>
		<Select_Box_Z_Adjust>3.0f</Select_Box_Z_Adjust>
		<Is_Placed_By_Editor>false</Is_Placed_By_Editor>
		
		<!-- ATTRIBUTES -->
		<Affiliation> Masari </Affiliation>
		<Victory_Relevant> No </Victory_Relevant>
		<CategoryMask> Small, Organic, CanAttack, RadiationHurts </CategoryMask>
		<Weather_Category>Infantry</Weather_Category>
		<Create_Team> Yes </Create_Team> <!-- DEBUG: I don't think Grunts come in teams -->
		<Mass>1.0</Mass>
		<Can_Fall_From_Bridge> true </Can_Fall_From_Bridge>
		<Importance> 0.1 </Importance>
		<Shot_Type> Infantry </Shot_Type>

		<Attributes SubObjectList="Yes">
			<Tactical_Build_Cost_Credits/>
		</Attributes>

    <!-- MOVEMENT -->
    <MovementClass>Flying</MovementClass>
    <UnitCollisionClass> Infantry </UnitCollisionClass>
    <OccupationStyle>1x1</OccupationStyle>
    <Space_Layer> LandDynamic </Space_Layer>
    <Max_Speed> 2.0 </Max_Speed>
    <!-- jdg was 0.8 -->
    <Max_Rate_Of_Turn> 6.0 </Max_Rate_Of_Turn>
    <Stopped_Rate_Of_Turn> 12.0 </Stopped_Rate_Of_Turn>
    <OverrideAcceleration> .125 </OverrideAcceleration>
    <OverrideDeceleration> .125 </OverrideDeceleration>
    <Movement_Animation_Speed> 2.0 </Movement_Animation_Speed>
    <Rotation_Animation_Speed> 20.0 </Rotation_Animation_Speed>
    <Walk_Animation_Speed> .366 </Walk_Animation_Speed>
    <Crouch_Animation_Speed> .537 </Crouch_Animation_Speed>
    <Strafe_Animation_Speed> 1.5 </Strafe_Animation_Speed>
    <Backpedal_Animation_Speed> 1.5 </Backpedal_Animation_Speed>
    <Strafe_Max_Speed_Coefficient> 1 </Strafe_Max_Speed_Coefficient>
    <Backpedal_Max_Speed_Coefficient> 1 </Backpedal_Max_Speed_Coefficient>
    <Custom_Soft_Footprint_Radius> 5.0 </Custom_Soft_Footprint_Radius>
    <Custom_Hard_XExtent> 6.0 </Custom_Hard_XExtent>
    <Custom_Hard_YExtent> 6.0 </Custom_Hard_YExtent>
    <Locomotor_Has_Animation_Priority> true </Locomotor_Has_Animation_Priority>
    <Should_Move_Anim_Lockout_Attack_Anim> true </Should_Move_Anim_Lockout_Attack_Anim>
    <FormationSpacing> 1.8 </FormationSpacing>
    <!-- <Walk_Locomotor_Anim_Subindex> 0 </Walk_Locomotor_Anim_Subindex> -->
    <MaxJiggleDistance> 3.5 </MaxJiggleDistance>
    <Max_Thrust> 1.5 </Max_Thrust>
    <Thrust_Acceleration> .1 </Thrust_Acceleration>
    <Thrust_Deceleration> .1 </Thrust_Deceleration>
    <Min_Flight_Elevation> 0 </Min_Flight_Elevation>
    <!-- upped from 40/60 API -->
    <Max_Flight_Elevation> 0 </Max_Flight_Elevation>
    <Can_Fly_In_Alternative_Walk_State>Yes</Can_Fly_In_Alternative_Walk_State>
	<Should_Move_At_Water_Level> true </Should_Move_At_Water_Level>

     <!-- Oksana: set cruising altitude so that it does not snap to terrain when spawned-->
     <Min_Flight_Elevation>70</Min_Flight_Elevation>
     <Max_Flight_Elevation>80</Max_Flight_Elevation>
	 
		
		<!-- CONFLICT -->
		<Is_Attackable> true </Is_Attackable>
		<Collidable_By_Projectile_Living>Yes</Collidable_By_Projectile_Living>
		<Ranged_Target_Z_Adjust>7.0</Ranged_Target_Z_Adjust>
		<Land_FOW_Reveal_Range>200.0</Land_FOW_Reveal_Range>

		<Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>
		<Only_Moves_In_Tornado>true</Only_Moves_In_Tornado>
		<Tornado_Movement_Factor>0.00001</Tornado_Movement_Factor>
		<Is_Resource_Collector> true </Is_Resource_Collector>

		<Tactical_Health> 750 </Tactical_Health>
		
		<!-- BEHAVIORS -->
		<Behavior>
			PERSISTENT_UNIT,
			SELECTABLE,
			RADAR_MAP_VISIBLE,
			ATTRIBUTE_DIRECTORY,
			EFFECT_GENERATOR,
			EFFECT_REGISTRY,
		</Behavior>
		
		<LandBehavior> 
			EFFECT_GENERATOR,
			EFFECT_REGISTRY,
			ATTRIBUTE_DIRECTORY,
			ABILITY_COUNTDOWN,
			SWITCH_TYPE,
			GUI,
			RADAR_MAP_VISIBLE,
			WALK_LOCOMOTOR,
			FORMATION,
			IDLE,
			TARGETING,
			WEAPON,
			STUNNABLE,
			TURRET,
			REVEAL,
			HIDE_WHEN_FOGGED,
			UNIT_AI,
			AI_RECRUITABLE,
			AI_TARGET,
			BALLISTIC,
			DAMAGE_TRACKING,
			TACTICAL_SELL,
				TACTICAL_AI,
			<!-- ELEMENTAL_MODE must be last because it causes add behavior to be called -->
			ELEMENTAL_MODE
		</LandBehavior>

		<BehaviorType Name="SelectableBehaviorType">
			<!-- DME 02/05/08 magnetism testing-->
			<Allow_Friendly_Cursor_Magnetism> true </Allow_Friendly_Cursor_Magnetism>
			<Allow_Enemy_Cursor_Magnetism> true </Allow_Enemy_Cursor_Magnetism>
			<Cursor_Magnetism_Extent_Adder> 5 </Cursor_Magnetism_Extent_Adder>
		</BehaviorType>

		<BehaviorType Name="ArmorAndDamageBehaviorType">
			<Armor_Type> Armor_Masari_Vehicle_Elite </Armor_Type>
		</BehaviorType>

		<BehaviorType Name="TacticalSellBehaviorType">
			<Sell_Effect_Generator_Name>MasariSellGenerator</Sell_Effect_Generator_Name>
		</BehaviorType>

		<Attributes SubObjectList="Yes">
			<!-- This MODIFIER determines what portion of the whole price we must reduce.  Hence, a modifier
			of value 0 means that we refund 100%, a modifier of -0.2 means we refund 80%, etc. -->
			<Tactical_Sell_Percent_Modifier> -0.5 </Tactical_Sell_Percent_Modifier>
			<Tactical_Sell_Time_Seconds>5.0</Tactical_Sell_Time_Seconds>
			
		</Attributes>
		
		<BehaviorType name="AIBehaviorType">
			<AI_Combat_Power> 1 </AI_Combat_Power>
			<Idle_Chase_Range> 1.0 </Idle_Chase_Range>
			<Guard_Chase_Range> 1.0 </Guard_Chase_Range>
			<Attack_Move_Response_Range> 1.0 </Attack_Move_Response_Range>
			<Autonomous_Move_Extension_Vs_Attacker> 1.0 </Autonomous_Move_Extension_Vs_Attacker>
			<AI_Target_Level>Group_Member</AI_Target_Level>
		</BehaviorType>

		<BehaviorType Name="WeaponBehaviorType">
			<Can_Attack_Without_Weapon_Behavior>Yes</Can_Attack_Without_Weapon_Behavior>
			<Targeting_Priority_Set> Reaper_Harvester_Targeting </Targeting_Priority_Set>
			<Targeting_Fire_Inaccuracy> 1.0 </Targeting_Fire_Inaccuracy>		
			<Targeting_Min_Attack_Distance> 0.0 </Targeting_Min_Attack_Distance>
			<Targeting_Max_Attack_Distance> 100.0 </Targeting_Max_Attack_Distance>
			<Targeting_Stickiness_Time_Threshold> 5.0 </Targeting_Stickiness_Time_Threshold>
		</BehaviorType>
	  <!-- =================================================================================================
		== [11/16/2006] This behavior type defines data for Type_Switch behavior - Oksana Kubushyna
		================================================================================================== -->
    <BehaviorType Name="TypeSwitchBehaviorType">

      <!-- Base To Fire -->
      <Type_Switch_Pre_Activate_Anim>	Masari_Elemental,	Masari_Seeker_Fire, Special_Start_A  </Type_Switch_Pre_Activate_Anim>
      <Type_Switch_Active_Anim>		   Masari_Elemental,	Masari_Seeker_Fire, Special_Action_A	</Type_Switch_Active_Anim>
      <Type_Switch_Post_Activate_Anim> Masari_Elemental,	Masari_Seeker_Fire, Special_End_A	   </Type_Switch_Post_Activate_Anim>

      <!-- Fire to Ice -->
      <Type_Switch_Pre_Activate_Anim>  Masari_Elemental_Fire,   Masari_Elemental_Ice,  Special_Start_A	</Type_Switch_Pre_Activate_Anim>
      <Type_Switch_Active_Anim>		   Masari_Elemental_Fire,	Masari_Elemental_Ice,   Special_Action_A  </Type_Switch_Active_Anim>
      <Type_Switch_Post_Activate_Anim> Masari_Elemental_Fire,	Masari_Elemental_Ice,   Special_End_A	   </Type_Switch_Post_Activate_Anim>

      <!-- Ice to Fire -->
      <Type_Switch_Pre_Activate_Anim>	Masari_Elemental_Ice,	Masari_Elemental_Fire, Special_Start_A		</Type_Switch_Pre_Activate_Anim>
      <Type_Switch_Active_Anim>		   Masari_Elemental_Ice,	Masari_Elemental_Fire, Special_Action_A	</Type_Switch_Active_Anim>
      <Type_Switch_Post_Activate_Anim> Masari_Elemental_Ice,	Masari_Elemental_Fire, Special_End_A		</Type_Switch_Post_Activate_Anim>

      <!-- List of types this object can switch to - This is mainly needed to inforce build limits and must be
						only added to the base type used for production dependencies purposes -->
      <Type_Switch_Types> Masari_Elemental_Fire, Masari_Elemental_Ice  </Type_Switch_Types>

      <Switch_Effect_Generator_Name> MasariSwitchGenerator </Switch_Effect_Generator_Name>

    </BehaviorType>

      <BehaviorType Name="ElementalModeBehaviorType">
         <Elemental_Object_Types> Fire, Masari_Elemental_Fire </Elemental_Object_Types>
         <Elemental_Object_Types> Ice, Masari_Elemental_Ice </Elemental_Object_Types>
      </BehaviorType>

		<BehaviorType Name="ProductionBehaviorType">
			<Size_Value> 10 </Size_Value>
			<Build_Cost_Credits> 10 </Build_Cost_Credits>
			<Build_Time_Seconds> 5 </Build_Time_Seconds>
			<Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
			<Extra_Enablers_Increase_Build_Rate> 1.0 </Extra_Enablers_Increase_Build_Rate>
      		<Build_Limit_Current_Per_Player>7</Build_Limit_Current_Per_Player>
		</BehaviorType>

		<BehaviorType Name="TurretBehaviorType">
			<Is_Turret_Entire_Body> false </Is_Turret_Entire_Body>
			<Turret_Rotate_Extent_Degrees>360</Turret_Rotate_Extent_Degrees>
			<Turret_Elevate_Extent_Degrees>135</Turret_Elevate_Extent_Degrees>
			<Turret_Bone_Name>B_Turret</Turret_Bone_Name>
			<Barrel_Bone_Name>MuzzleA_00</Barrel_Bone_Name>
			<Turret_Rotate_Speed>5.0</Turret_Rotate_Speed>
			<Apply_Z_Turret_Rotate_To_Axis>2</Apply_Z_Turret_Rotate_To_Axis>
			<Apply_Y_Turret_Rotate_To_Axis>1</Apply_Y_Turret_Rotate_To_Axis>
			<Turret_Targets_Ground_Vehicles> 1 </Turret_Targets_Ground_Vehicles>
			<Turret_Targets_Ground_Infantry> 2 </Turret_Targets_Ground_Infantry>
			<Turret_Targets_Air_Vehicles> 3 </Turret_Targets_Air_Vehicles>
			<Turret_Targets_Anything_Else> 4 </Turret_Targets_Anything_Else>
			<Turret_Rotate_To_Rest_Delay_Sec> 0.0 </Turret_Rotate_To_Rest_Delay_Sec>
			<Ground_Vehicle_Turret_Target> Yes </Ground_Vehicle_Turret_Target>
			<Should_Turret_Return_To_Rest_Before_Undeploy>No</Should_Turret_Return_To_Rest_Before_Undeploy>
			<Should_Turret_Return_To_Rest_Before_Deploy>No</Should_Turret_Return_To_Rest_Before_Deploy>
			<Face_Movement_Direction_When_Idle> Yes </Face_Movement_Direction_When_Idle>
		</BehaviorType>
		
		<BehaviorType Name="TooltipBehaviorType">
			<Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_ALIEN_REAPER_DRONE </Tooltip_Description_Text_ID>
			<Tooltip_Category> TEXT_TOOLTIP_CATEGORY_WALKER </Tooltip_Category>
		</BehaviorType>

		<BehaviorType Name="RadarMapBehaviorType">
			<Radar_Icon_Size>0.03  0.03</Radar_Icon_Size>
		</BehaviorType>

		<BehaviorType Name="GUIBehaviorType">
			<GUI_Scene_Name> Masari_HealthBar_Scene_Small </GUI_Scene_Name>
			<GUI_Receives_Input> false </GUI_Receives_Input>
			<GUI_Min_Scale> 0.3 </GUI_Min_Scale>
			<GUI_Max_Scale> 2.5 </GUI_Max_Scale>
			<GUI_Default_Scale> 1.5 </GUI_Default_Scale>
			<GUI_World_Offset> 0.0, 0.0, -5 </GUI_World_Offset>
		</BehaviorType>


      <BehaviorType Name="BallisticBehaviorType">
         <Ballistic_Weight>1.0</Ballistic_Weight>
      </BehaviorType>

		<BehaviorType Name="BlobShadowBehaviorType">
			<Blob_Shadow_Below_Detail_Level>3</Blob_Shadow_Below_Detail_Level>
			<Blob_Shadow_Scale>10.0, 10.0</Blob_Shadow_Scale>
			<Blob_Shadow_Bone_Name>B_Chest</Blob_Shadow_Bone_Name>
			<Blob_Shadow_Below_Detail_Level>3</Blob_Shadow_Below_Detail_Level>
			<Blob_Shadow_Scale>5.0, 5.0</Blob_Shadow_Scale>
			<Blob_Shadow_Material_Name>Generic_Shadow</Blob_Shadow_Material_Name>
			<Blob_Shadow_Bone_Name>B_Chest</Blob_Shadow_Bone_Name>
			<No_Reflection_Below_Detail_Level>1</No_Reflection_Below_Detail_Level>
			<No_Refraction_Below_Detail_Level>1</No_Refraction_Below_Detail_Level>
		</BehaviorType>

		<BehaviorType Name="SFXBehaviorType">
			<SFXEvent_Fire> </SFXEvent_Fire>
			<SFXEvent_Select> Unit_Select_Masari_Generic </SFXEvent_Select>
			<SFXEvent_Move> Unit_Move_Masari_Generic </SFXEvent_Move>
			<SFXEvent_Attack> Unit_Attack_Masari_Generic </SFXEvent_Attack>
			<SFXEvent_Guard> </SFXEvent_Guard>
			<SFXEvent_Assist_Move> </SFXEvent_Assist_Move>
			<SFXEvent_Assist_Attack> </SFXEvent_Assist_Attack>
			<SFXEvent_Turret_Rotating_Loop> </SFXEvent_Turret_Rotating_Loop>
			<Death_SFXEvent_Start_Die> Unit_Death_Masari_Male </Death_SFXEvent_Start_Die>
			<SFXEvent_Engine_Idle_Loop> </SFXEvent_Engine_Idle_Loop>
			<SFXEvent_Engine_Moving_Loop> </SFXEvent_Engine_Moving_Loop>
			<SFXEvent_Unit_Lost />
			<SFXEvent_Tactical_Build_Started />
			<SFXEvent_Tactical_Build_Complete />
			<SFXEvent_Tactical_Build_Cancelled />		
        </BehaviorType>

		<BehaviorType Name="DeathFXBehaviorType">
			<Specific_Death_Anim_Type> DIE </Specific_Death_Anim_Type>
		</BehaviorType>

		<BehaviorType Name="BuildableObjectBehaviorType">
			<Tactical_Production_Queue>Tactical_Units</Tactical_Production_Queue>
			<Tactical_Build_Cost_Campaign> 85 </Tactical_Build_Cost_Campaign>
			<Tactical_Build_Cost_Multiplayer> 85 </Tactical_Build_Cost_Multiplayer>
			<Tactical_Build_Time_Seconds> 45 </Tactical_Build_Time_Seconds>
			<Tactical_UI_Build_Queue_Order> 1 </Tactical_UI_Build_Queue_Order>
		</BehaviorType>

		<BehaviorType Name="CrushBehaviorType">
			<Crush_Defense>40</Crush_Defense>
			<Crush_Power> 30 </Crush_Power>
		</BehaviorType>
		
		<BehaviorType Name="FleetBehaviorType">
			<!-- Maria 05.24.2006 - How much space does the unit take up -->
			<Unit_Pop_Cap> 1 </Unit_Pop_Cap>
		</BehaviorType>
		
		<BehaviorType Name="LuaScriptBehaviorType">
			<Lua_Land_Behaviors> AlienReaperTurret </Lua_Land_Behaviors>
			<Lua_Script_Data>
				ResourceFaction = "Masari"
				resource_drone_search_radius = 300.0
				resource_drone_harvest_distance = 100.0
			</Lua_Script_Data>
		</BehaviorType>

		<!-- ABILITIES -->

		<Abilities SubObjectList="Yes">

			<Effect_Generator_Ability Name="Elementalist_Harvest_Resource_Special_Ability">
				<Activation_Min_Range> 0 </Activation_Min_Range>
				<Activation_Max_Range> 100 </Activation_Max_Range>
				<Activation_Style> SPECIAL_ATTACK </Activation_Style>

				<Applicable_Unit_Categories> Resource | Resource_INST </Applicable_Unit_Categories>

				<Effect_Generator_Name> MasariHarvestResourceGenerator </Effect_Generator_Name>

				<Can_Target_Allies>yes</Can_Target_Allies>
				<Can_Target_Enemies>Yes</Can_Target_Enemies>
				<Can_Target_Neutral>Yes</Can_Target_Neutral>

				<Point_Turret_At_Target>Yes </Point_Turret_At_Target>
				
			</Effect_Generator_Ability>


			<Effect_Generator_Ability Name="Alien_Reaper_Attack_Small_Unit_Special_Ability">
				<Activation_Min_Range> 0 </Activation_Min_Range>
				<Activation_Max_Range> 100 </Activation_Max_Range>
				<Effect_Generator_Name> ReaperAttackSmallUnitGenerator </Effect_Generator_Name>
				<Applicable_Unit_Categories> Organic + Medium | Small | Piloted  </Applicable_Unit_Categories>
				<Excluded_Unit_Categories> Resource, Resource_INST, HardPoint, Huge, Piloted, Stationary, Flying </Excluded_Unit_Categories>
				<Excluded_Unit_Types> Military_Hero_Randal_Moore, Military_Hero_Tank </Excluded_Unit_Types>
				<Max_Channel_Range> 150.0 </Max_Channel_Range>
				<Is_Channeling_Independent_Generator>Yes</Is_Channeling_Independent_Generator>

				<Point_Turret_At_Target>No </Point_Turret_At_Target>

			</Effect_Generator_Ability>

			<Effect_Generator_Ability Name="Reaper_Harvest_Resource_Special_Ability">
				<Activation_Min_Range> 0 </Activation_Min_Range>
				<Activation_Max_Range> 100 </Activation_Max_Range>
				<Activation_Style> SPECIAL_ATTACK </Activation_Style>

				<Max_Channel_Range> 125.0 </Max_Channel_Range>
				<Is_Channeling_Independent_Generator>Yes</Is_Channeling_Independent_Generator>

				<Effect_Generator_Name> AlienHarvestResourceGenerator </Effect_Generator_Name>
				<Applicable_Unit_Categories> Resource </Applicable_Unit_Categories>

				<Can_Target_Allies>yes</Can_Target_Allies>
				<Can_Target_Enemies>Yes</Can_Target_Enemies>
				<Can_Target_Neutral>Yes</Can_Target_Neutral>

				<Point_Turret_At_Target>No </Point_Turret_At_Target>

			</Effect_Generator_Ability>

			<Effect_Generator_Ability Name="Reaper_Harvest_Instant_Resource_Special_Ability">
				<Activation_Min_Range> 0 </Activation_Min_Range>
				<Activation_Max_Range> 100 </Activation_Max_Range>
				<Activation_Style> SPECIAL_ATTACK </Activation_Style>

				<!-- Oksana:this ability does not channel. Once activated, it cannot be cancelled. 
					  It cannot drop target mid-way, or it will appear as a visual glitch. -->
				<!-- <Max_Channel_Range> 125.0 </Max_Channel_Range> -->

				<!-- We should let Targeting do the turret thing - Oksana -->
				<!-- Turret_Points_At_Target> true </Turret_Points_At_Target -->

				<Effect_Generator_Name> AlienHarvestInstantResourceGenerator </Effect_Generator_Name>
				<Applicable_Unit_Categories> Resource_INST </Applicable_Unit_Categories>

				<Can_Target_Allies>yes</Can_Target_Allies>
				<Can_Target_Enemies>Yes</Can_Target_Enemies>
				<Can_Target_Neutral>Yes</Can_Target_Neutral>

				<Point_Turret_At_Target>No </Point_Turret_At_Target>

				<!-- For this one, we don't want to interrupt it once started. -->
				<!-- If we do, we may end up with a unit dangling above ground. -->
				<Deactivate_On_User_Attack_Order>No</Deactivate_On_User_Attack_Order>
				<Deactivate_On_User_Move_Order>No</Deactivate_On_User_Move_Order>
			</Effect_Generator_Ability>



			<Effect_Generator_Ability Name="Reaper_Toggle_Auto_Harvest_Special_Ability">
				<Activation_Min_Range> 0 </Activation_Min_Range>
				<Activation_Max_Range> 100 </Activation_Max_Range>
				<Effect_Generator_Name> EnableAutoHarvestingGenerator </Effect_Generator_Name>
				<Activation_Style> User_Input </Activation_Style>
				<Face_Target> false </Face_Target>
				<Can_Target_Allies>Yes</Can_Target_Allies>
				<Is_Self_Targeted> true </Is_Self_Targeted>

				<!-- Any new move/attack order will cancel this ability -->
				<Deactivate_On_User_Attack_Order>yes</Deactivate_On_User_Attack_Order>
				<Deactivate_On_User_Move_Order>yes</Deactivate_On_User_Move_Order>
			</Effect_Generator_Ability>
		</Abilities>




		<!-- EFFECT GENERATORS -->
		<Effect_Generator_Data SubObjectList="Yes">

			<!-- Default attack on resource units -->
			<Effect_Generator Name="MasariHarvestResourceGenerator">
				<Should_Deactivate_Manually> Yes </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> AlienHarvestResourcesEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Deactivate_Parent_If_Idle>Yes</Deactivate_Parent_If_Idle>
					<Can_Target_Alive_Objects>Yes</Can_Target_Alive_Objects>
					<Can_Target_Dead_Objects> Yes </Can_Target_Dead_Objects>

               		<Target_Filter_C> Is_Not_Ally </Target_Filter_C>

					<Source_SFX_Event> SFX_Alien_Reaping_Loop </Source_SFX_Event>
					<Source_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Source_SFX_Loop_Type>
					<Stop_Source_SFX_On_Deactivate> true </Stop_Source_SFX_On_Deactivate>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry2">
					<Effect_Name> AlienHarvestResourcesOwnerEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Self </Target_Gathering_Mask>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry3">
					<Effect_Name> AlienHarvestResourcesVisualEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
				</Effect_Generator_Entry>

			</Effect_Generator>

			<!-- Default attack on non-resource units -->
			<Effect_Generator Name="ReaperAttackSmallUnitGenerator">
				<Should_Deactivate_Manually> Yes </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> ReaperAttackSmallUnitsEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Default_Attack </Target_Filter_C>

					<Should_Add_All_Team_Members_As_Targets> No </Should_Add_All_Team_Members_As_Targets>
					<Should_Add_Closest_Team_Member_As_Target> Yes </Should_Add_Closest_Team_Member_As_Target>
					<Should_Add_Team_Container_As_Target> No </Should_Add_Team_Container_As_Target>
					<Is_Applicable_To_Team_Members>Yes</Is_Applicable_To_Team_Members>
					<Is_Applicable_To_Team_Containers>No</Is_Applicable_To_Team_Containers>
					<Is_Applicable_To_Non_Team_Objects>Yes</Is_Applicable_To_Non_Team_Objects>

					<Source_SFX_Event> SFX_Alien_Reaping_Loop </Source_SFX_Event>
					<Source_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Source_SFX_Loop_Type>
					<Stop_Source_SFX_On_Deactivate> true </Stop_Source_SFX_On_Deactivate>

				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry2">
					<Effect_Name> AlienHarvestResourcesOwnerEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Self </Target_Gathering_Mask>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry3">
					<Effect_Name> AlienHarvestResourcesVisualEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Should_Add_All_Team_Members_As_Targets> No </Should_Add_All_Team_Members_As_Targets>
					<Should_Add_Closest_Team_Member_As_Target> Yes </Should_Add_Closest_Team_Member_As_Target>
					<Should_Add_Team_Container_As_Target> No </Should_Add_Team_Container_As_Target>
					<Is_Applicable_To_Team_Members>Yes</Is_Applicable_To_Team_Members>
					<Is_Applicable_To_Team_Containers>No</Is_Applicable_To_Team_Containers>
					<Is_Applicable_To_Non_Team_Objects>Yes</Is_Applicable_To_Non_Team_Objects>
				</Effect_Generator_Entry>


			</Effect_Generator>

			<!-- Finalization of an attack  -->
			<Effect_Generator Name="ReaperAbductTargetEffectGenerator">
				<Should_Deactivate_Manually> No </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<!-- Attempt to abduct - we can only do this if no other reapers are abducting this target already -->
				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> ReaperAbductTargetEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Abduct </Target_Filter_C>

					<Should_Add_All_Team_Members_As_Targets> No </Should_Add_All_Team_Members_As_Targets>
					<Should_Add_Closest_Team_Member_As_Target> Yes </Should_Add_Closest_Team_Member_As_Target>
					<Should_Add_Team_Container_As_Target> No </Should_Add_Team_Container_As_Target>
					<Is_Applicable_To_Team_Members>Yes</Is_Applicable_To_Team_Members>
					<Is_Applicable_To_Team_Containers>No</Is_Applicable_To_Team_Containers>
					<Is_Applicable_To_Non_Team_Objects>Yes</Is_Applicable_To_Non_Team_Objects>

					<Target_SFX_Event> SFX_Alien_Reaping_Loop </Target_SFX_Event>
					<Target_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Target_SFX_Loop_Type>
					<Stop_Target_SFX_On_Deactivate> true </Stop_Target_SFX_On_Deactivate>

				</Effect_Generator_Entry>

			</Effect_Generator>



			<!-- Finalization of an attack  -->
			<Effect_Generator Name="ReaperDissolveTargetEffectGenerator">
				<Should_Deactivate_Manually> No </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<!-- Attempt to dissolve -->

				<Effect_Generator_Entry Name="Entry0">

					<Effect_Name> NoDeathCloneDestroyObject </Effect_Name>
					<Duration> -1.0 </Duration>
					<Base_Delay> 2.0 </Base_Delay>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Abduct </Target_Filter_C>
					<Target_Filter_Categories>~Stationary + ~Hardpoint</Target_Filter_Categories>

				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry1">
							  
					<Effect_Name> ReaperDissolveTargetEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Abduct </Target_Filter_C>
					<Target_Filter_Categories>~Stationary + ~Hardpoint</Target_Filter_Categories>
					<Target_SFX_Event> SFX_Alien_Dissolve_Unit </Target_SFX_Event>
					<Target_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Target_SFX_Loop_Type>
					<Linked_Effect_Names> ReaperDissolveTargetVisualEffect </Linked_Effect_Names>

				</Effect_Generator_Entry>

				<!-- Attempt to dissolve -->
				<Effect_Generator_Entry Name="Entry2">
							  
					<Effect_Name> ReaperDissolveStationaryTargetEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Abduct </Target_Filter_C>
					<Target_Filter_Categories>Stationary</Target_Filter_Categories>
					<Target_SFX_Event> SFX_Alien_Dissolve_Unit </Target_SFX_Event>
					<Target_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Target_SFX_Loop_Type>

				</Effect_Generator_Entry>

				<!-- Attempt to dissolve -->
				<Effect_Generator_Entry Name="Entry3">

					<Effect_Name> ReaperDestroyHardpointEffect </Effect_Name>
					<Duration> 0.1 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Target_Filter_C> Reaper_Abduct </Target_Filter_C>
					<Target_Filter_Categories>Hardpoint</Target_Filter_Categories>
					<Target_SFX_Event> SFX_Alien_Dissolve_Unit </Target_SFX_Event>
					<Target_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Target_SFX_Loop_Type>

				</Effect_Generator_Entry>

			</Effect_Generator>

			<!-- Default attack on INSTANT resource units -->
			<Effect_Generator Name="AlienHarvestInstantResourceGenerator">
				<Should_Deactivate_Manually> No </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> AlienHarvestInstantResourcesEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Deactivate_Parent_If_Idle>Yes</Deactivate_Parent_If_Idle>
					<Can_Target_Alive_Objects>Yes</Can_Target_Alive_Objects>
					<Can_Target_Dead_Objects> Yes </Can_Target_Dead_Objects>

					<Should_Add_All_Team_Members_As_Targets> No </Should_Add_All_Team_Members_As_Targets>
					<Should_Add_Closest_Team_Member_As_Target> Yes </Should_Add_Closest_Team_Member_As_Target>
					<Should_Add_Team_Container_As_Target> No </Should_Add_Team_Container_As_Target>
					<Is_Applicable_To_Team_Members>Yes</Is_Applicable_To_Team_Members>
					<Is_Applicable_To_Team_Containers>No</Is_Applicable_To_Team_Containers>
					<Is_Applicable_To_Non_Team_Objects>Yes</Is_Applicable_To_Non_Team_Objects>

					<!-- Target validation MUST be the same as in LUA!!! -->
					<Target_Filter_C> Reaper_Harvest_Resource </Target_Filter_C>

					 <Source_SFX_Event> SFX_Alien_Reaping_Instant </Source_SFX_Event>

				</Effect_Generator_Entry>


				<Effect_Generator_Entry Name="Entry2">
					<Effect_Name> AlienHarvestResourcesOwnerEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Self </Target_Gathering_Mask>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry3">
					<Effect_Name> AlienHarvestResourcesVisualEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>

					<Should_Add_All_Team_Members_As_Targets> No </Should_Add_All_Team_Members_As_Targets>
					<Should_Add_Closest_Team_Member_As_Target> Yes </Should_Add_Closest_Team_Member_As_Target>
					<Should_Add_Team_Container_As_Target> No </Should_Add_Team_Container_As_Target>
					<Is_Applicable_To_Team_Members>Yes</Is_Applicable_To_Team_Members>
					<Is_Applicable_To_Team_Containers>No</Is_Applicable_To_Team_Containers>
					<Is_Applicable_To_Non_Team_Objects>Yes</Is_Applicable_To_Non_Team_Objects>

				</Effect_Generator_Entry>
			</Effect_Generator>


			<!-- Default attack on resource units -->
			<Effect_Generator Name="AlienHarvestResourceGenerator">
				<Should_Deactivate_Manually> Yes </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>

				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> AlienHarvestResourcesEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
					<Deactivate_Parent_If_Idle>Yes</Deactivate_Parent_If_Idle>
					<Can_Target_Alive_Objects>Yes</Can_Target_Alive_Objects>
					<Can_Target_Dead_Objects> Yes </Can_Target_Dead_Objects>

					<!-- Target validation MUST be the same as in LUA!!! -->
					<Target_Filter_C> Reaper_Harvest_Resource </Target_Filter_C>

					<Source_SFX_Event> SFX_Alien_Reaping_Loop </Source_SFX_Event>
					<Source_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Source_SFX_Loop_Type>
					<Stop_Source_SFX_On_Deactivate> true </Stop_Source_SFX_On_Deactivate>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry2">
					<Effect_Name> AlienHarvestResourcesOwnerEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Self </Target_Gathering_Mask>
				</Effect_Generator_Entry>

				<Effect_Generator_Entry Name="Entry3">
					<Effect_Name> AlienHarvestResourcesVisualEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
				</Effect_Generator_Entry>

			</Effect_Generator>


			<!-- Enable Auto-Harvesting -->
			<Effect_Generator Name="EnableAutoHarvestingGenerator">
				<Should_Deactivate_Manually> Yes </Should_Deactivate_Manually>
				<Is_Independent_Generator> Yes </Is_Independent_Generator>
				<Effect_Generator_Entry Name="Entry1">
					<Effect_Name> ReaperTurretEnableAutoHarvestingEffect </Effect_Name>
					<Duration> -1.0 </Duration>
					<Target_Gathering_Mask> Self </Target_Gathering_Mask>
				</Effect_Generator_Entry>
			</Effect_Generator>

		</Effect_Generator_Data>


		<Unit_Abilities_Data SubObjectList="Yes">

			<Unit_Ability Name="Alien_Reaper_Attack_Small_Unit_Ability">
				<Type>EFFECT_GENERATOR</Type>
				<GUI_Activated_Ability_Name> Alien_Reaper_Attack_Small_Unit_Special_Ability </GUI_Activated_Ability_Name>
				<Effect_Generator_Name> ReaperAttackSmallUnitGenerator </Effect_Generator_Name>
				<Recharge_Seconds>0.3</Recharge_Seconds>
			</Unit_Ability>

			<!-- this ability is activated by attack order on a resource unit -->
			<Unit_Ability Name="Reaper_Harvest_Resource_Ability">
				<Type>EFFECT_GENERATOR</Type>
				<Effect_Generator_Name> AlienHarvestResourceGenerator </Effect_Generator_Name>
				<GUI_Activated_Ability_Name> Reaper_Harvest_Resource_Special_Ability </GUI_Activated_Ability_Name>
				<Is_Modal>Yes</Is_Modal>
				<Recharge_Seconds>0.3</Recharge_Seconds>
			</Unit_Ability>
			
			<!-- this ability is activated by attack order on a resource unit -->
			<Unit_Ability Name="Elementalist_Harvest_Resource_Ability">
				<Type>EFFECT_GENERATOR</Type>
				<Effect_Generator_Name> MasariHarvestResourceGenerator </Effect_Generator_Name>
				<GUI_Activated_Ability_Name> Elementalist_Harvest_Resource_Special_Ability </GUI_Activated_Ability_Name>
				<Is_Modal>Yes</Is_Modal>
				<Recharge_Seconds>0.3</Recharge_Seconds>
			</Unit_Ability>

			<!-- this ability is activated by attack order on an INSTANT resource unit -->
			<Unit_Ability Name="Reaper_Harvest_Instant_Resource_Ability ">
				<Type>EFFECT_GENERATOR</Type>
				<Effect_Generator_Name> AlienHarvestInstantResourceGenerator </Effect_Generator_Name>
				<GUI_Activated_Ability_Name> Reaper_Harvest_Instant_Resource_Special_Ability  </GUI_Activated_Ability_Name>
				<Is_Modal>Yes</Is_Modal>
				<Recharge_Seconds>0.5</Recharge_Seconds>
			</Unit_Ability>

			<!-- this is a user-activated toggle ability for auto-collect -->
			<Unit_Ability Name="Reaper_Auto_Gather_Resources">
				<Type>EFFECT_GENERATOR</Type>
				<Active_By_Default>Yes</Active_By_Default>
				<GUI_Activated_Ability_Name> Reaper_Toggle_Auto_Harvest_Special_Ability </GUI_Activated_Ability_Name>
				<Effect_Generator_Name> EnableAutoHarvestingGenerator </Effect_Generator_Name>
            <SFXEvent_GUI_Unit_Ability_Activated>SFX_Alien_Infantry_Fire</SFXEvent_GUI_Unit_Ability_Activated> 
				<SFXEvent_GUI_Unit_Ability_Deactivated>SFX_Alien_Grunt_Fire</SFXEvent_GUI_Unit_Ability_Deactivated>
			</Unit_Ability>
		</Unit_Abilities_Data>


	</X13_Masari_Units>
	

<!-- **************************************************************************************** -->	
<!-- *** VARIANTS *************************************************************************** -->	
<!-- **************************************************************************************** -->	

	<X13_Masari_Units Name="Masari_Elemental_Fire">
    	<Land_Model_Name>ZV_Stormchaser_Air.ALO</Land_Model_Name>
		<Variant_Of_Existing_Type>Masari_Elemental</Variant_Of_Existing_Type>

		<!-- ATTRIBUTES -->
		<CategoryMask> Flying, Medium, Piloted, CanAttack </CategoryMask>
		
		<!--  MOVEMENT  -->
		<MovementClass>flying</MovementClass>
		<UnitCollisionClass>Vehicle</UnitCollisionClass>
		<OccupationStyle>1x1</OccupationStyle>
		<Space_Layer>Air</Space_Layer>
		<Stationary_Space_Layer>LandDynamic</Stationary_Space_Layer>
		<Max_Speed>1.5</Max_Speed>
		<Max_Rate_Of_Turn>15.0</Max_Rate_Of_Turn>
		<Stopped_Rate_Of_Turn>10.0</Stopped_Rate_Of_Turn>
		<OverrideAcceleration>.125</OverrideAcceleration>
		<OverrideDeceleration>.125</OverrideDeceleration>
		<Movement_Animation_Speed>2.0</Movement_Animation_Speed>
		<Rotation_Animation_Speed>20.0</Rotation_Animation_Speed>
		<Walk_Animation_Speed>.833</Walk_Animation_Speed>
		<Crouch_Animation_Speed>.537</Crouch_Animation_Speed>
		<Strafe_Animation_Speed>2.0</Strafe_Animation_Speed>
		<Backpedal_Animation_Speed>2.0</Backpedal_Animation_Speed>
		<Strafe_Max_Speed_Coefficient>1</Strafe_Max_Speed_Coefficient>
		<Backpedal_Max_Speed_Coefficient>1</Backpedal_Max_Speed_Coefficient>
		<Locomotor_Has_Animation_Priority>true</Locomotor_Has_Animation_Priority>
		<Should_Move_Anim_Lockout_Attack_Anim>false</Should_Move_Anim_Lockout_Attack_Anim>
		<MaxJiggleDistance>3.5</MaxJiggleDistance>
		<Min_Flight_Elevation>70</Min_Flight_Elevation>
		<Max_Flight_Elevation>80</Max_Flight_Elevation>
		<Max_Thrust>1.2</Max_Thrust>
		<Thrust_Acceleration>.1</Thrust_Acceleration>
		<Thrust_Deceleration>.1</Thrust_Deceleration>
	</X13_Masari_Units>

	<X13_Masari_Units Name="Masari_Elemental_Ice">
		<Variant_Of_Existing_Type>Masari_Elemental</Variant_Of_Existing_Type>

		<Attributes SubObjectList="Yes">
			<DMA_Max> 500.0 </DMA_Max>
			<DMA_Regen_Rate> 10.0 </DMA_Regen_Rate>
		</Attributes>
		
		<!-- MOVEMENT -->
		<Max_Speed> 1.0 </Max_Speed>
		<Movement_Animation_Speed> 1.0 </Movement_Animation_Speed>
		<Walk_Animation_Speed> .366 </Walk_Animation_Speed>
      <MovementClass>Infantry</MovementClass>

    <Effect_Generator_Data SubObjectList="Yes" Replace="No">

      <Effect_Generator Name="IceVisualGenerator">

        <Starts_Active> true </Starts_Active>

        <Effect_Generator_Entry Name="Entry1">
          <Effect_Name> MasariSeekerIceVisualEffect </Effect_Name>
          <Duration> -1.0 </Duration>
          <Target_Gathering_Mask> Self </Target_Gathering_Mask>
        </Effect_Generator_Entry>

      </Effect_Generator>
	  </Effect_Generator_Data>

      <Min_Flight_Elevation>0</Min_Flight_Elevation>
      <Max_Flight_Elevation>0</Max_Flight_Elevation>
	</X13_Masari_Units>


	<X99_Test_Objects Name="Masari_Elemental_Electricity">
		<Variant_Of_Existing_Type>Masari_Elemental</Variant_Of_Existing_Type>
	</X99_Test_Objects>


</Masari_INF_Elemental_XML>
