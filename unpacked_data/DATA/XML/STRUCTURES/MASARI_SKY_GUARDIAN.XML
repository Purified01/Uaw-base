<?xml version="1.0"?>
<Masari_Sky_Guardian_XML>

   <!-- **************************************************************************************** -->
   <!-- *** STRUCTURE ************************************************************************** -->
   <!-- **************************************************************************************** -->

   <X13_Masari_Structures Name="Masari_Sky_Guardian">

      <!-- ART -->
      <Land_Model_Name> ZB_Sky_Turret.alo </Land_Model_Name>
      <Scale_Factor>1.0</Scale_Factor>
      <Multisample_FOW_Check>Yes</Multisample_FOW_Check>
      <Last_State_Visible_Under_FOW> Yes </Last_State_Visible_Under_FOW>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Text_ID> TEXT_MASARI_STRUCTURE_SKY_GUARDIAN </Text_ID>

      <!-- ATTRIBUTES -->
      <Attributes SubObjectList="Yes">
         <Tactical_Sell_Percent_Modifier> -0.5 </Tactical_Sell_Percent_Modifier>
         <Tactical_Sell_Time_Seconds>3.0</Tactical_Sell_Time_Seconds>
         <DMA_Max> 300.0 </DMA_Max>
         <DMA_Regen_Rate> 8.0 </DMA_Regen_Rate>
         <Importance> 0.1 </Importance>
         <Shot_Type> Circle </Shot_Type>
      </Attributes>

		<Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>
      <CategoryMask> Medium, Stationary, CanAttack  </CategoryMask>
      <Affiliation> Masari </Affiliation>
      <Victory_Relevant> No </Victory_Relevant>

      <!-- MOVEMENT -->
      <Space_Layer> LandDynamic </Space_Layer>
      <MovementClass>Building</MovementClass>
      <UnitCollisionClass> High Obstacle </UnitCollisionClass>
      <Custom_Hard_XExtent> 15.0 </Custom_Hard_XExtent>
      <Custom_Hard_YExtent> 15.0 </Custom_Hard_YExtent>

      <!-- CONFLICT -->
      <Is_Attackable> true </Is_Attackable>
      <Collidable_By_Projectile_Living>Yes</Collidable_By_Projectile_Living>
      <Ranged_Target_Z_Adjust> 20.0 </Ranged_Target_Z_Adjust>
      <Tactical_Health> 400 </Tactical_Health>
      <Land_Damage_Thresholds>1, 0.66, 0.33, 0</Land_Damage_Thresholds>
      <Land_Damage_Alternates>0, 1, 2, 3</Land_Damage_Alternates>
      <Land_Damage_SFX>null,SFX_GENERIC_DETONATION, SFX_GENERIC_DETONATION,null</Land_Damage_SFX>
      <Land_FOW_Reveal_Range>300.0</Land_FOW_Reveal_Range>
      <Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>
      <Tornado_Movement_Factor>0.00001</Tornado_Movement_Factor>


      <!-- BEHAVIORS -->
      <Behavior>
         GROUND_STRUCTURE,
         SELECTABLE,
      </Behavior>

      <LandBehavior>
         TACTICAL_BUILD_OBJECTS,
         GUI,
         RADAR_MAP_VISIBLE,
         REVEAL,
         HIDE_WHEN_FOGGED,
         ABILITY_COUNTDOWN,
         UNIT_AI,
         AI_RECRUITABLE,
         AI_TARGET,
         TURRET,
         DAMAGE_TRACKING,
         TARGETING,
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         ATTRIBUTE_DIRECTORY,
         SWITCH_TYPE,
         HARD_POINT_MANAGER,
         IDLE,
         TERRAFORM,
         WEAPON,
         TACTICAL_SELL,
         <!-- ELEMENTAL_MODE must be last because it causes add behavior to be called -->
         ELEMENTAL_MODE
      </LandBehavior>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_LIGHT </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>
        <Tooltip_Good_Against> TEXT_TYPE_VERSUS_AIR_UNITS </Tooltip_Good_Against>
        <Tooltip_Vulnerable_To> TEXT_TYPE_VERSUS_VEHICLES </Tooltip_Vulnerable_To>

         <!--  MARIA: We need to know if the structure's tooltip must be modified by its hps (upgrades).
               NOTE: this flag defaults to No -->
         <HP_Attachment_Modifies_Tooltip> Yes </HP_Attachment_Modifies_Tooltip>
      </BehaviorType>

         <Researched_Upgrades>
		TEXT_MASARI_RESEARCH_TITLE_BURNING_BRILLIANCE
		TEXT_MASARI_RESEARCH_TITLE_UNSEEN_BARRIER
		TEXT_MASARI_RESEARCH_TITLE_ADVANCED_DARK_MATTER_ARMOR
		TEXT_MASARI_RESEARCH_TITLE_DARK_MATTER_AFINITY
		TEXT_MASARI_RESEARCH_TITLE_DARK_MATTER_MASTERY
		TEXT_MASARI_RESEARCH_TITLE_STATIONARY_REVELATION
		TEXT_MASARI_RESEARCH_TITLE_CLEANSING_ENERGY
         </Researched_Upgrades>
	 
      <BehaviorType Name="TerraformBehaviorType">
         <Bib_X_Extent> 20 </Bib_X_Extent>
         <Bib_Y_Extent> 20 </Bib_Y_Extent>
      </BehaviorType>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Armor_Type> Armor_Masari_Structure_Turret </Armor_Type>
      </BehaviorType>

      <BehaviorType Name="GameEventSourceBehaviorType">
         <Game_Event_Source_Category> Structure </Game_Event_Source_Category>
      </BehaviorType>

      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
        <Build_Limit_Current_Per_Player>25</Build_Limit_Current_Per_Player>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <Tactical_Under_Construction_Object_Type> Masari_Sky_Guardian_Construction </Tactical_Under_Construction_Object_Type>
         <Tactical_Buildable_Beacon_Type> Masari_Sky_Guardian_Beacon </Tactical_Buildable_Beacon_Type>
      </BehaviorType>

      <BehaviorType Name="TacticalSellBehaviorType">
         <Sell_Effect_Generator_Name>MasariSellGenerator</Sell_Effect_Generator_Name>
      </BehaviorType>

      <BehaviorType Name="GroundStructureBehaviorType">
         <Is_Buildable_By_Constructor> Yes </Is_Buildable_By_Constructor>
         <!-- 
					Maria 01.31.2007 - This value is used to determine the facing of the
					ghost structure when in building placement mode.  It must be a value
					between 0.0 - 359.0
				-->
         <Default_Building_Placement_Rotation>225</Default_Building_Placement_Rotation>
      </BehaviorType>

      <BehaviorType Name="DeathFXBehaviorType">
         <Death_Clone>Damage_Default, Masari_Sky_Guardian_Death_Clone</Death_Clone>
         <Death_Explosions>Large_Explosion_Land</Death_Explosions>
         <Death_Clone_Keep_Behaviors> EFFECT_REGISTRY </Death_Clone_Keep_Behaviors>
         <Death_Fade_Time> 0.25 </Death_Fade_Time>
         <Death_Persistence_Duration> 5 </Death_Persistence_Duration>
         <IsDeathCloneObstacle> true </IsDeathCloneObstacle>
      </BehaviorType>

      <BehaviorType Name="RadarMapBehaviorType">
         <Radar_Icon_Size>0.03  0.03</Radar_Icon_Size>
      </BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <SFXEvent_Select>SFX_Structure_Select_Masari_Sky_Guardian</SFXEvent_Select>
         <Death_SFXEvent_Start_Die> SFX_Masari_Large_Structure_Death</Death_SFXEvent_Start_Die>
         <SFXEvent_Unit_Lost />
         <SFXEvent_Tactical_Build_Started>GUI_BUILD_Structure</SFXEvent_Tactical_Build_Started>
         <SFXEvent_Tactical_Build_Complete>SFX_Structure_Select_Masari_Sky_Guardian</SFXEvent_Tactical_Build_Complete>
         <SFXEvent_Tactical_Build_Cancelled>GUI_BUILD_Structure_Canceled</SFXEvent_Tactical_Build_Cancelled>

         <!-- Frank TODO -->
         <SFXEvent_Fire>SFX_Masari_Structure_Fire</SFXEvent_Fire>
      </BehaviorType>

      <BehaviorType Name="WeaponBehaviorType">
         <Can_Attack_Without_Weapon_Behavior>Yes</Can_Attack_Without_Weapon_Behavior>
         <Targeting_Stickiness_Time_Threshold>5.0</Targeting_Stickiness_Time_Threshold>
      </BehaviorType>

      <BehaviorType Name="TurretBehaviorType">
         <Is_Turret_Entire_Body> false </Is_Turret_Entire_Body>
         <Turret_Rotate_Extent_Degrees>360</Turret_Rotate_Extent_Degrees>
         <Turret_Elevate_Extent_Degrees>135</Turret_Elevate_Extent_Degrees>
         <Turret_Bone_Name>B_Turret</Turret_Bone_Name>
         <Barrel_Bone_Name>B_Barrel</Barrel_Bone_Name>
         <Turret_Rotate_Speed>10.0</Turret_Rotate_Speed>
         <Apply_Z_Turret_Rotate_To_Axis>2</Apply_Z_Turret_Rotate_To_Axis>
         <Apply_Y_Turret_Rotate_To_Axis>1</Apply_Y_Turret_Rotate_To_Axis>
         <Turret_Targets_Ground_Vehicles> 2 </Turret_Targets_Ground_Vehicles>
         <Turret_Targets_Ground_Infantry> 3 </Turret_Targets_Ground_Infantry>
         <Turret_Targets_Air_Vehicles> 1 </Turret_Targets_Air_Vehicles>
         <Turret_Targets_Anything_Else> 9999 </Turret_Targets_Anything_Else>
         <Turret_Rotate_To_Rest_Delay_Sec> 5.0 </Turret_Rotate_To_Rest_Delay_Sec>
         <Ground_Vehicle_Turret_Target> Yes </Ground_Vehicle_Turret_Target>
         <Should_Turret_Return_To_Rest_Before_Undeploy>No</Should_Turret_Return_To_Rest_Before_Undeploy>
         <Should_Turret_Return_To_Rest_Before_Deploy>No</Should_Turret_Return_To_Rest_Before_Deploy>
      </BehaviorType>

      <BehaviorType Name="ElementalModeType">
      </BehaviorType>

      <BehaviorType Name="TypeSwitchBehaviorType">
         <!-- List of types this object can switch to - This is mainly needed to inforce build limits and must be
						only added to the base type used for production dependencies purposes -->
      </BehaviorType>

      <Attached_Hard_Points>
         Masari_Sky_Guardian_HP00, HP_Attach_00
      </Attached_Hard_Points>

      <BehaviorType Name="TacticalBuildObjectsBehaviorType">
         <HP_Socket_Type> Masari_Sky_Guardian_Socket </HP_Socket_Type>

         <!-- temp attach point -->
         <Tactical_Build_Hard_Point_Attachment_Bone> Root </Tactical_Build_Hard_Point_Attachment_Bone>
         <Minimum_Time_Before_Pad_Can_Build_Again>5</Minimum_Time_Before_Pad_Can_Build_Again>

         <Visible_To_Enemies_When_Empty> true </Visible_To_Enemies_When_Empty>
         <Hides_When_Built_On>No</Hides_When_Built_On>
         <Destroy_When_Child_Dies>No</Destroy_When_Child_Dies>

         <Upgrading_Structure_Effect_Generator_Name> UpgradingStructureEffectGenerator </Upgrading_Structure_Effect_Generator_Name>
      </BehaviorType>

      <BehaviorType Name="CrushBehaviorType">
			<Crush_Defense>60</Crush_Defense>
			<Crush_Power>55</Crush_Power>
      </BehaviorType>

      <BehaviorType Name="BlobShadowBehaviorType">
         <No_Reflection_Below_Detail_Level>1</No_Reflection_Below_Detail_Level>
         <No_Refraction_Below_Detail_Level>1</No_Refraction_Below_Detail_Level>
      </BehaviorType>

      <BehaviorType Name="EncyclopediaBehaviorType">
         <Icon_Name>i_icon_mb_sky_guardian.tga</Icon_Name>
      </BehaviorType>

      <BehaviorType Name="GUIBehaviorType">
         <GUI_Scene_Name> MASARI_Tactical_Upgrades_Menu </GUI_Scene_Name>
         <GUI_Receives_Input> yes </GUI_Receives_Input>
         <GUI_Min_Scale> 0.8 </GUI_Min_Scale>
         <GUI_Max_Scale> 3.0 </GUI_Max_Scale>
         <GUI_Default_Scale> 1.0 </GUI_Default_Scale>
      </BehaviorType>

      <BehaviorType Name="SelectableBehaviorType">
         <Select_Box_Scale>60</Select_Box_Scale>
         <Select_Box_Z_Adjust>3.0f</Select_Box_Z_Adjust>
        <Select_As_Non_Structure>True</Select_As_Non_Structure> <!-- Please see SCC before adjusting-->
      </BehaviorType>

		<BehaviorType Name="AIBehaviorType">
			<AI_Combat_Power> 1 </AI_Combat_Power>
			<AI_Target_Level>Individual</AI_Target_Level>
			<Allow_Multiple_Recruitment>True</Allow_Multiple_Recruitment>
		</BehaviorType>

      <BehaviorType Name="SwitchTypeBehaviorType">
         <Keep_Hardpoints_On_Switch> true </Keep_Hardpoints_On_Switch>
         <Type_Switch_Types> Masari_Sky_Guardian_Fire, Masari_Sky_Guardian_Ice  </Type_Switch_Types>
         <Switch_Effect_Generator_Name> MasariSwitchGenerator </Switch_Effect_Generator_Name>
      </BehaviorType>

		<BehaviorType Name="ElementalModeBehaviorType">
			<Elemental_Object_Types> Fire, Masari_Sky_Guardian_Fire </Elemental_Object_Types>
			<Elemental_Object_Types> Ice, Masari_Sky_Guardian_Ice </Elemental_Object_Types>
		</BehaviorType>

      <Unit_Abilities_Data SubObjectList="Yes">

         <Unit_Ability Name="Sky_Guardian_Gust_Unit_Ability">
            <Type>EFFECT_GENERATOR</Type>
            <Recharge_Seconds>3.0</Recharge_Seconds>
            <Expiration_Seconds>0.5</Expiration_Seconds>
            <GUI_Activated_Ability_Name>Sky_Guardian_Gust_Ability</GUI_Activated_Ability_Name>
            <Effect_Generator_Name>SkyGuardianGustGenerator</Effect_Generator_Name>

            <!-- Frank TODO -->
            <SFXEvent_GUI_Unit_Ability_Activated>SFX_Masari_Gust</SFXEvent_GUI_Unit_Ability_Activated>
         </Unit_Ability>

      </Unit_Abilities_Data>

      <Abilities SubObjectList="Yes">

         <Effect_Generator_Ability Name="Sky_Guardian_Gust_Ability">
            <Activation_Min_Range>0</Activation_Min_Range>
            <Activation_Max_Range>200</Activation_Max_Range>
            <Effect_Generator_Name>SkyGuardianGustGenerator</Effect_Generator_Name>
            <Activation_Style> User_Input </Activation_Style>
            <Is_Self_Targeted>Yes</Is_Self_Targeted>
            <Can_Target_Enemies>No</Can_Target_Enemies>
            <Can_Target_Allies>Yes</Can_Target_Allies>
            <Can_Target_Neutral>No</Can_Target_Neutral>
            <Pre_Generate_Anim_Type />
            <Generating_Anim_Type />
            <Post_Generate_Anim_Type />
         </Effect_Generator_Ability>

      </Abilities>

      <Effect_Generator_Data SubObjectList="Yes">

         <Effect_Generator Name="SkyGuardianGustGenerator">
            <Should_Deactivate_Manually>No</Should_Deactivate_Manually>
            <Is_Independent_Generator>No</Is_Independent_Generator>

            <Effect_Generator_Entry Name="Entry1">
               <Effect_Name>SkyGuardianGustEffect</Effect_Name>
               <Area_Effect_Radius> 150.0 </Area_Effect_Radius>
               <Duration>0.5</Duration>
               <Target_Gathering_Mask>SelfAE</Target_Gathering_Mask>
               <Target_Filter_Categories> Flying </Target_Filter_Categories>
               <Target_Filter_C> Is_Enemy </Target_Filter_C>
            </Effect_Generator_Entry>

            <Effect_Generator_Entry Name="Entry2">
               <Duration> 1.1 </Duration>
               <Effect_Name> SkyGuardianGustVisualEffect </Effect_Name>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
            </Effect_Generator_Entry>

         </Effect_Generator>


         <Effect_Generator Name="MasariSwitchGenerator">
            <Should_Deactivate_Manually> false </Should_Deactivate_Manually>
            <Is_Independent_Generator>Yes</Is_Independent_Generator>

            <Effect_Generator_Entry Name="Entry1">
               <Duration> 0.5 </Duration>
               <Base_Delay> 0.4 </Base_Delay>
               <Effect_Name> MasariFullArmorEffect </Effect_Name>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
               <!-- only in ice mode -->
               <Target_Filter_C> In_Ice_Mode </Target_Filter_C>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <Effect_Generator Name="MasariStationaryRevelationGenerator">
            <Should_Deactivate_Manually> false </Should_Deactivate_Manually>
            <Is_Independent_Generator>Yes</Is_Independent_Generator>
            <Modal_Refresh_Frequency> 3.0 </Modal_Refresh_Frequency>
            <Starts_Active> yes </Starts_Active>
            <Disable_Generator_Attribute> Is_Mind_Controlled </Disable_Generator_Attribute>

            <Effect_Generator_Entry Name="Entry1">
               <Duration> 3.1 </Duration>
               <Effect_Name> MasariStationaryRevelationEffect </Effect_Name>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <!-- Standard Sell generator  - 06/28/2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Sell_Effect_Generators\MASARI_Sell_Generators.xml" -->

      </Effect_Generator_Data>

   </X13_Masari_Structures>



   <!-- **************************************************************************************** -->
   <!-- *** CONSTRUCTION VERSION *************************************************************** -->
   <!-- **************************************************************************************** -->

   <X13_Masari_Structures Name="Masari_Sky_Guardian_Construction">

      <!-- ART -->
      <Land_Model_Name>ZB_Sky_Turret.alo</Land_Model_Name>
      <Scale_Factor>1.0</Scale_Factor>
      <Multisample_FOW_Check>Yes</Multisample_FOW_Check>
      <Last_State_Visible_Under_FOW> Yes </Last_State_Visible_Under_FOW>

      <!-- INTERFACE -->
      <Text_ID> TEXT_MASARI_STRUCTURE_SKY_GUARDIAN </Text_ID>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <!-- ATTRIBUTES -->
      <Attributes SubObjectList="Yes">
         <!-- This MODIFIER determines what portion of the whole price we must reduce.  Hence, a modifier
		of value 0 means that we refund 100%, a modifier of -0.2 means we refund 80%, etc. -->
         <Tactical_Sell_Percent_Modifier> 0.0 </Tactical_Sell_Percent_Modifier>
         <Tactical_Sell_Time_Seconds>0.5</Tactical_Sell_Time_Seconds>

         <!-- Can never build faster than 2x the speed (50% less time) -->
         <Max_Structure_Build_Rate>4.0</Max_Structure_Build_Rate>

      </Attributes>

      <CategoryMask> Large, Stationary, TacticalBuildableStructure  </CategoryMask>
      <Affiliation> Masari </Affiliation>
      <Victory_Relevant> No </Victory_Relevant>

      <!-- MOVEMENT -->
      <Space_Layer> LandDynamic </Space_Layer>
      <MovementClass>Building</MovementClass>
      <UnitCollisionClass> HighObstacle </UnitCollisionClass>
      <Custom_Hard_XExtent> 15.0 </Custom_Hard_XExtent>
      <Custom_Hard_YExtent> 15.0 </Custom_Hard_YExtent>

      <!-- CONFLICT -->
      <Is_Attackable> true </Is_Attackable>
      <Collidable_By_Projectile_Living>Yes</Collidable_By_Projectile_Living>
      <Ranged_Target_Z_Adjust> 10.0 </Ranged_Target_Z_Adjust>

		<Tactical_Health> 500 </Tactical_Health>
		<Dense_FOW_Reveal_Range_Multiplier> 0.0 </Dense_FOW_Reveal_Range_Multiplier>
		<Land_Damage_Thresholds>1, 0.66, 0.33, 0</Land_Damage_Thresholds>
		<Land_Damage_Alternates>0, 1, 2, 3</Land_Damage_Alternates>
		<Land_Damage_SFX>null,SFX_GENERIC_DETONATION, SFX_GENERIC_DETONATION,null</Land_Damage_SFX>
      <Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>
      <Tornado_Movement_Factor>0.00001</Tornado_Movement_Factor>


      <!-- BEHAVIORS -->
      <!-- NOTE: TACTICAL_UNDER_CONSTRUCTION does not work as a Land_Behavior, since the type - > Behaves_Like() fails for some reason when it should not - need to fix -->
      <Behavior>
         ATTRIBUTE_DIRECTORY,
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         TACTICAL_UNDER_CONSTRUCTION,
         SELECTABLE,
         REVEAL,
         HIDE_WHEN_FOGGED,
         RADAR_MAP_VISIBLE,
         TACTICAL_SELL,
         TERRAFORM,
         GUI
      </Behavior>

      <BehaviorType Name="GameEventSourceBehaviorType">
         <Game_Event_Source_Category> StructureUnderConstruction </Game_Event_Source_Category>
      </BehaviorType>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Armor_Type> Armor_Masari_Structure_Turret </Armor_Type>
      </BehaviorType>

      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <Tactical_Buildable_Beacon_Type> Masari_Sky_Guardian_Beacon </Tactical_Buildable_Beacon_Type>
         <Tactical_Buildable_Constructed> Masari_Sky_Guardian </Tactical_Buildable_Constructed>
         <Tactical_Build_Cost_Multiplayer> 60 </Tactical_Build_Cost_Multiplayer>
         <Tactical_Build_Cost_Campaign> 60 </Tactical_Build_Cost_Campaign>
         <Tactical_Build_Time_Seconds> 38 </Tactical_Build_Time_Seconds>
         <Tactical_UI_Build_Queue_Order> 8 </Tactical_UI_Build_Queue_Order>
         <Tactical_Build_Requires_Builder> true </Tactical_Build_Requires_Builder>
      </BehaviorType>

      <BehaviorType Name="TacticalSellBehaviorType">
         <Sell_Effect_Generator_Name>MasariSellGenerator</Sell_Effect_Generator_Name>
      </BehaviorType>

      <BehaviorType Name="DeathFXBehaviorType">
         <Remove_Upon_Death>true</Remove_Upon_Death>
         <Death_Clone_Is_Obstacle> false </Death_Clone_Is_Obstacle>
         <Death_Explosions>Large_Explosion_Land</Death_Explosions>
      </BehaviorType>

      <BehaviorType Name="RadarMapBehaviorType">
         <Radar_Icon_Size>0.03  0.03</Radar_Icon_Size>
      </BehaviorType>

      <BehaviorType Name="BlobShadowBehaviorType">
         <No_Reflection_Below_Detail_Level> 1 </No_Reflection_Below_Detail_Level>
         <No_Refraction_Below_Detail_Level> 1 </No_Refraction_Below_Detail_Level>
         <No_Reflection_Below_Detail_Level>1</No_Reflection_Below_Detail_Level>
      </BehaviorType>

      <BehaviorType Name="GUIBehaviorType">
         <GUI_Scene_Name> HealthBar_Scene_Large </GUI_Scene_Name>
         <GUI_Receives_Input> no </GUI_Receives_Input>
         <GUI_Min_Scale> 0.8 </GUI_Min_Scale>
         <GUI_Max_Scale> 3.0 </GUI_Max_Scale>
         <GUI_Default_Scale> 1.0 </GUI_Default_Scale>
      </BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <SFXEvent_Select />
         <SFXEvent_Unit_Lost />
         <SFXEvent_Tactical_Build_Started />
         <SFXEvent_Tactical_Build_Complete />
         <SFXEvent_Tactical_Build_Cancelled />
         <Death_SFXEvent_Start_Die />
      </BehaviorType>

		<BehaviorType Name="CrushBehaviorType">
			<Crush_Defense>60</Crush_Defense>
			<Crush_Power>55</Crush_Power>
		</BehaviorType>

      <BehaviorType Name="EncyclopediaBehaviorType">
         <Icon_Name>i_icon_mb_sky_guardian.tga</Icon_Name>
      </BehaviorType>

      <BehaviorType Name="SelectableBehaviorType">
         <Select_Box_Scale>175</Select_Box_Scale>
         <Select_Box_Z_Adjust>3.0f</Select_Box_Z_Adjust>
      </BehaviorType>

      <BehaviorType Name="RevealBehaviorType">
         <Land_FOW_Reveal_Range>30.0</Land_FOW_Reveal_Range>
      </BehaviorType>

      <BehaviorType Name="TerraformBehaviorType">
         <Bib_X_Extent> 30 </Bib_X_Extent>
         <Bib_Y_Extent> 30 </Bib_Y_Extent>
      </BehaviorType>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_LIGHT </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>
        <Tooltip_Good_Against> TEXT_TYPE_VERSUS_AIR_UNITS </Tooltip_Good_Against>
        <Tooltip_Vulnerable_To> TEXT_TYPE_VERSUS_VEHICLES </Tooltip_Vulnerable_To>
      </BehaviorType>
      
      <Effect_Generator_Data SubObjectList="Yes">

         <!-- Standard generator for structures with upgrades being built - Maria 06.09.2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Generic_Upgrading_Structure_Effects\Generic_Upgrading_Structure_Generators.xml" -->

      </Effect_Generator_Data>

   </X13_Masari_Structures>




   <!-- **************************************************************************************** -->
   <!-- *** BEACON ***************************************************************************** -->
   <!-- **************************************************************************************** -->

   <!-- Oksana: beacon for building the glyph. You'll need a builder unit to build from beacon -->
   <X13_Masari_Structures Name="Masari_Sky_Guardian_Beacon">

      <!-- ART -->
      <Land_Model_Name>ZB_Beacon.alo</Land_Model_Name>
      <Scale_Factor>1.0</Scale_Factor>
      <Is_Decoration>No</Is_Decoration>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Is_Placed_By_Editor> false </Is_Placed_By_Editor>
      <Text_ID> TEXT_MASARI_STRUCTURE_SKY_GUARDIAN_BEACON </Text_ID>


      <!-- ATTRIBUTES -->
      <Attributes SubObjectList="Yes">
         <!-- 
				This MODIFIER determines what portion of the whole price we must reduce.  Hence, a modifier
				of value 0 means that we refund 100%, a modifier of -0.2 means we refund 80%, etc.
			-->
         <Tactical_Sell_Percent_Modifier> 0.0 </Tactical_Sell_Percent_Modifier>
         <Tactical_Sell_Time_Seconds>0.5</Tactical_Sell_Time_Seconds>
			<Is_Immune_To_Mind_Control> true </Is_Immune_To_Mind_Control>
			<Is_Immune_To_Virus> true </Is_Immune_To_Virus>
      </Attributes>

      <CategoryMask> TacticalBuildableStructure </CategoryMask>
      <Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>
      <Affiliation> Masari </Affiliation>

      <!-- CONFLICT -->
      <Is_Attackable>Yes</Is_Attackable>
      <Collidable_By_Projectile_Living> Yes </Collidable_By_Projectile_Living>
      <Ranged_Target_Z_Adjust> 0.0 </Ranged_Target_Z_Adjust>
      <Tactical_Health>1</Tactical_Health>

      <!-- BEHAVIORS -->
      <Behavior>
         ATTRIBUTE_DIRECTORY,
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         TACTICAL_BUILDABLE_BEACON,
         INVULNERABLE,
         CLOAKED,
         TACTICAL_SELL,
         SELECTABLE
      </Behavior>

      <BehaviorType Name="GameEventSourceBehaviorType">
         <Game_Event_Source_Category> TacticalBuildBeacon </Game_Event_Source_Category>
      </BehaviorType>

      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <Tactical_Buildable_Constructed> Masari_Sky_Guardian_Construction </Tactical_Buildable_Constructed>
      </BehaviorType>

      <BehaviorType Name="TacticalSellBehaviorType">
         <Sell_Effect_Generator_Name>MasariSellGenerator</Sell_Effect_Generator_Name>
      </BehaviorType>

      <BehaviorType Name="TacticalBuildableBeaconBehaviorType">
      </BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <SFXEvent_Fire> SFX_Alien_Radiation_Detonation_1 </SFXEvent_Fire>
      </BehaviorType>

      <BehaviorType Name="CrushBehaviorType">
         <Crush_Defense>90</Crush_Defense>
      </BehaviorType>

      <BehaviorType Name="SelectableBehaviorType">
         <Select_Box_Scale>50</Select_Box_Scale>
         <Select_Box_Z_Adjust>3.0f</Select_Box_Z_Adjust>
      </BehaviorType>

      <Effect_Generator_Data SubObjectList="Yes">

         <!-- Standard Sell generator  - 06/28/2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Sell_Effect_Generators\MASARI_Sell_Generators.xml" -->

      </Effect_Generator_Data>

   </X13_Masari_Structures>



   <!-- **************************************************************************************** -->
   <!-- ****DEATH CLONE(S)********************************************************************** -->
   <!-- **************************************************************************************** -->

   <X13_Masari_Structures Name="Masari_Sky_Guardian_Death_Clone">

      <!-- ART -->
      <Land_Model_Name>ZB_sky_turret_DC.ALO</Land_Model_Name>
      <Scale_Factor>1.0</Scale_Factor>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Text_ID>TEXT_NONE</Text_ID>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <!-- ATTRIBUTES -->
      <Is_Immune_To_Tornado>true</Is_Immune_To_Tornado>

      <!-- CONFLICT -->
      <Ranged_Target_Z_Adjust>0.1</Ranged_Target_Z_Adjust>

      <LandBehavior>
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         ATTRIBUTE_DIRECTORY,
         PARTICLE
      </LandBehavior>

      <BehaviorType Name="SFXBehaviorType">
         <Death_SFXEvent_End_Die />
         <Death_SFXEvent_Start_Die> SFX_Masari_Large_Structure_Death </Death_SFXEvent_Start_Die>
      </BehaviorType>

      <BehaviorType Name="DeathFXBehaviorType">
         <Specific_Death_Anim_Type> Die </Specific_Death_Anim_Type>
         <Death_Fade_Time> 0.25 </Death_Fade_Time>
         <Death_Persistence_Duration> 0.0 </Death_Persistence_Duration>
      </BehaviorType>


   </X13_Masari_Structures>



   <!-- **************************************************************************************** -->
   <!-- *** HARDPOINTS ************************************************************************* -->
   <!-- **************************************************************************************** -->

   <HardPoint Name="Masari_Sky_Guardian_HP">

      <!-- ART -->
      <Land_Model_Name>Invisible_HardPoint.alo</Land_Model_Name>
      <Scale_Factor> 0.5 </Scale_Factor>
      <Exclude_From_Distance_Fade> true </Exclude_From_Distance_Fade>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Is_Placed_By_Editor> false </Is_Placed_By_Editor>

      <!-- ATTRIBUTES -->
      <Attributes SubObjectList="Yes">
         <!-- This MODIFIER determines what portion of the whole price we must reduce.  Hence, a modifier
			of value 0 means that we refund 100%, a modifier of -0.2 means we refund 80%, etc. -->
         <Tactical_Sell_Percent_Modifier> -0.1 </Tactical_Sell_Percent_Modifier>
			<Is_Immune_To_Virus> true </Is_Immune_To_Virus>
		</Attributes>

      <CategoryMask> Untargetable </CategoryMask>
      <Affiliation> Masari </Affiliation>

      <!-- CONFLICT -->
      <Is_Attackable> false </Is_Attackable>
      <Collidable_By_Projectile_Living> Yes </Collidable_By_Projectile_Living>
      <Collidable_By_Projectile_Dead> No </Collidable_By_Projectile_Dead>
      <Ranged_Target_Z_Adjust> 0.0 </Ranged_Target_Z_Adjust>
      <Tactical_Health> 500 </Tactical_Health>

      <!-- BEHAVIORS -->
      <!-- Any unit that has hard points requires a Behavior entry with HARD_POINT_MANAGER, and an <Attached_Hard_Points> list  -->
      <!-- Any object that is a hard point requires a Behavior entry with HARD_POINT -->
      <Behavior>
         HARD_POINT
      </Behavior>

      <LandBehavior>
         ABILITY_COUNTDOWN,
         DAMAGE_TRACKING,
         TACTICAL_SELL,
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         ATTRIBUTE_DIRECTORY,
         IDLE
      </LandBehavior>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Armor_Type> Armor_Masari_Structure_Light </Armor_Type>
      </BehaviorType>

      <!-- Maria 08.09.2006  We want this object to be buildable -->
      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <Tactical_Under_Construction_Object_Type> Masari_Sky_Guardian_HP_Under_Construction </Tactical_Under_Construction_Object_Type>
      </BehaviorType>

      <BehaviorType Name="TacticalSellBehaviorType">
         <Tactical_Sell_Time_Seconds />
      </BehaviorType>


      <BehaviorType Name="HardPointBehaviorType">
         <HP_Type> HARD_POINT_DUMMY_ART </HP_Type>
         <HP_Replacement_Object_Type_When_Destroyed>  </HP_Replacement_Object_Type_When_Destroyed>
         <HP_Single_Destruction_Destroys_Parent> No </HP_Single_Destruction_Destroys_Parent>
         <HP_Parent_Takes_Damage>true</HP_Parent_Takes_Damage>
         <!-- Destroying this one hard point will trigger the parent object to be destroyed -->
      </BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <SFXEvent_Fire>  </SFXEvent_Fire>
         <Death_SFXEvent_Start_Die> SFX_Masari_HP_Weapon_1_Death </Death_SFXEvent_Start_Die>
         <SFXEvent_Turret_Rotating_Loop> SFX_Masari_Medium_Turret_Loop </SFXEvent_Turret_Rotating_Loop>
      </BehaviorType>

      <BehaviorType Name="LockableByDynamicScannerBehaviorType">
         <Dynamic_Scan_Target_Effect_Particle_Name> Dynamic_Scan_Target </Dynamic_Scan_Target_Effect_Particle_Name>
         <Dynamic_Scan_Target_Lock_Max_Delay_Seconds> 2.0 </Dynamic_Scan_Target_Lock_Max_Delay_Seconds>
         <Dynamic_Scan_Target_Lock_Min_Delay_Seconds> 0.0 </Dynamic_Scan_Target_Lock_Min_Delay_Seconds>
      </BehaviorType>

      <BehaviorType Name="DeathFXBehaviorType">
         <Remove_Upon_Death> Yes </Remove_Upon_Death>
         <!-- Yes: Instantly destroy death clone when effects are started -->
         <Death_Explosions> Small_Explosion_Land </Death_Explosions>
      </BehaviorType>

      <BehaviorType Name="CrushBehaviorType">
         <Crush_Defense>90</Crush_Defense>
      </BehaviorType>

      <Effect_Generator_Data SubObjectList="Yes" Replace="No">

         <!-- Standard DMA generator - Oksana 05/14/2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Masari_DMA\MASARI_DMA_Hardpoint_Generators.xml" -->

      </Effect_Generator_Data>

   </HardPoint>

   <!-- Generic Under_Construction hardpoint -->
   <HardPoint Name="Masari_Sky_Guardian_HP_Under_Construction">

      <!-- ART -->
      <Scale_Factor> 0.5 </Scale_Factor>
      <Exclude_From_Distance_Fade> true </Exclude_From_Distance_Fade>

      <!-- INTERFACE -->
      <Is_Placed_By_Editor> false </Is_Placed_By_Editor>
		<Is_UI_Relevant> false </Is_UI_Relevant>

		<!-- ATTRIBUTES -->
      <CategoryMask> Untargetable | TacticalBuildableStructure </CategoryMask>
      <Affiliation> Masari </Affiliation>

      <!-- CONFLICT -->
      <Is_Attackable> true </Is_Attackable>
      <Collidable_By_Projectile_Living> Yes </Collidable_By_Projectile_Living>
      <Collidable_By_Projectile_Dead> No </Collidable_By_Projectile_Dead>
      <Tactical_Health> 500 </Tactical_Health>

      <!-- BEHAVIORS -->
      <Behavior>
         TACTICAL_UNDER_CONSTRUCTION,
         HARD_POINT,
         EFFECT_REGISTRY,
         ATTRIBUTE_DIRECTORY,
         EFFECT_GENERATOR
      </Behavior>

      <BehaviorType Name="GameEventSourceBehaviorType">
         <Game_Event_Source_Category> HardpointUnderConstruction </Game_Event_Source_Category>
      </BehaviorType>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Armor_Type> Armor_Masari_Structure_Light </Armor_Type>
      </BehaviorType>

      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
      </BehaviorType>

      <BehaviorType Name="HardPointBehaviorType">
			<HP_Type> HARD_POINT_DUMMY_ART </HP_Type>
			<HP_Replacement_Object_Type_When_Destroyed>  </HP_Replacement_Object_Type_When_Destroyed>
			<HP_Single_Destruction_Destroys_Parent> No </HP_Single_Destruction_Destroys_Parent>
			<HP_Parent_Takes_Damage>true</HP_Parent_Takes_Damage>
		</BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <SFXEvent_Fire>  </SFXEvent_Fire>
         <Death_SFXEvent_Start_Die> SFX_Masari_HP_Weapon_1_Death </Death_SFXEvent_Start_Die>
         <SFXEvent_Turret_Rotating_Loop> SFX_Masari_Medium_Turret_Loop </SFXEvent_Turret_Rotating_Loop>
      </BehaviorType>

      <BehaviorType Name="DeathFXBehaviorType">
         <Remove_Upon_Death> Yes </Remove_Upon_Death>
         <!-- Yes: Instantly destroy death clone when effects are started -->
         <Death_Explosions> Small_Explosion_Land </Death_Explosions>
      </BehaviorType>

      <BehaviorType Name="CrushBehaviorType">
         <Crush_Defense>90</Crush_Defense>
      </BehaviorType>

   </HardPoint>


   <!-- *** Masari_Sky_Guardian_HP00 ************************************************************************* -->

   <HardPoint Name="Masari_Sky_Guardian_HP00">
      <Variant_Of_Existing_Type>Masari_Sky_Guardian_HP</Variant_Of_Existing_Type>

      <Land_Model_Name>Invisible_HardPoint.alo </Land_Model_Name>
      <Scale_Factor> 0.2 </Scale_Factor>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- CONFLICT -->
      <Is_Attackable> false </Is_Attackable>
      <Collidable_By_Projectile_Living> false </Collidable_By_Projectile_Living>
      <Collidable_By_Projectile_Dead> No </Collidable_By_Projectile_Dead>

      <!-- BEHAVIORS -->
      <!-- Any unit that has hard points requires a Behavior entry with HARD_POINT_MANAGER, and an <Attached_Hard_Points> list  -->
      <!-- Any object that is a hard point requires a Behavior entry with HARD_POINT -->
      <Behavior>
         HARD_POINT
      </Behavior>

      <LandBehavior>
         EFFECT_REGISTRY,
         ATTRIBUTE_DIRECTORY,
         TACTICAL_BUILD_OBJECTS,
         HARD_POINT_MANAGER,
         EFFECT_GENERATOR
      </LandBehavior>

     <BehaviorType Name="TacticalBuildObjectsBehaviorType">

         <HP_Socket_Type> Masari_Sky_Guardian_Socket </HP_Socket_Type>

         <Tactical_Build_Hard_Point_Attachment_Bone>Hp_Attach_00</Tactical_Build_Hard_Point_Attachment_Bone>
         <Minimum_Time_Before_Pad_Can_Build_Again>5</Minimum_Time_Before_Pad_Can_Build_Again>

         <Visible_To_Enemies_When_Empty>true</Visible_To_Enemies_When_Empty>
         <Hides_When_Built_On>No</Hides_When_Built_On>
         <Destroy_When_Child_Dies>No</Destroy_When_Child_Dies>

      </BehaviorType>

   </HardPoint>

   <!-- *** Wind_Screen hard point ************************************************************************* -->

   <HardPoint Name="Masari_Sky_Guardian_Wind_Screen">
      <Variant_Of_Existing_Type>Masari_Sky_Guardian_HP</Variant_Of_Existing_Type>
      <Land_Model_Name> Invisible_HardPoint.alo </Land_Model_Name>
      <Scale_Factor> 0.25 </Scale_Factor>
      <Use_Base_Type_By_Default> false </Use_Base_Type_By_Default>
      <AssetBank> BANK_MASARI </AssetBank>

      <Text_ID> TEXT_MASARI_STRUCTURE_SKY_GUARDIAN_WIND_SCREEN </Text_ID>

      <LandBehavior>
         ABILITY_COUNTDOWN,
         DAMAGE_TRACKING,
         TACTICAL_SELL,
         <!--JOEXMLCLEAN GUI,-->
         EFFECT_REGISTRY,
         EFFECT_GENERATOR,
         ATTRIBUTE_DIRECTORY,
         CREATE_CHILDREN,
         IDLE
      </LandBehavior>

      <BehaviorType Name="HardPointBehaviorType">
         <HP_Type> HARD_POINT_DUMMY_ART </HP_Type>
         <HP_Replacement_Object_Type_When_Destroyed>  </HP_Replacement_Object_Type_When_Destroyed>
         <HP_Single_Destruction_Destroys_Parent> No </HP_Single_Destruction_Destroys_Parent>
         <HP_Parent_Takes_Damage>true</HP_Parent_Takes_Damage>
         <!-- Destroying this one hard point will trigger the parent object to be destroyed -->

         <!--  MARIA: We need to know if this hard point is allowed to modify its parent's tooltip.
               MAKE SURE YOU SET THIS FLAG FOR HARD POINT OBJECTS ONLY! (otherwise it will do nothing)
               NOTE: this flag defaults to No -->
         <Modifies_Parent_Tooltip> Yes </Modifies_Parent_Tooltip>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <!-- Maria 06.28.2006 - What is the 'object under construction' that is placed in lieu of this object -->
         <Tactical_Under_Construction_Object_Type>Masari_Sky_Guardian_Wind_Screen_Under_Construction</Tactical_Under_Construction_Object_Type>
      </BehaviorType>

      <BehaviorType Name="EncyclopediaBehaviorType">
         <Icon_Name> i_icon_mb_sky_guardian1_wind_screen.tga </Icon_Name>
      </BehaviorType>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_LIGHT_WIND_SCREEN </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>
        <Tooltip_Good_Against> TEXT_TYPE_VERSUS_AIR_UNITS </Tooltip_Good_Against>
        <Tooltip_Vulnerable_To> TEXT_TYPE_VERSUS_VEHICLES </Tooltip_Vulnerable_To>

         <!-- If this guy modifies its parent he must have the text ID that should be used!.  We set the modified descriptions in the
            hard point's data given that they are the ones MODIFYING the parent's data tooltip data. -->
         <Modified_Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_W_WIND_SCREEN </Modified_Tooltip_Description_Text_ID>
      </BehaviorType>

      <BehaviorType Name="TacticalBuildObjectsBehaviorType">
         <Auto_Build_Tier_Priority> 1 </Auto_Build_Tier_Priority>
      </BehaviorType>

      <!-- CHILD OBJECTS -->
      <Create_Children_Data SubObjectList="Yes">

         <Create_Child_Data>
            <Type> Invisible_Wind_Screen </Type>
            <Creation_Trigger> OnParentBehaviorFirstService </Creation_Trigger>
            <Destruction_Trigger> OnParentBehaviorRemove </Destruction_Trigger>
         </Create_Child_Data>

      </Create_Children_Data>

   </HardPoint>

   <HardPoint Name="Masari_Sky_Guardian_Wind_Screen_Under_Construction">
      <Variant_Of_Existing_Type>Masari_Sky_Guardian_HP_Under_Construction</Variant_Of_Existing_Type>

      <Text_ID> TEXT_MASARI_STRUCTURE_SKY_GUARDIAN_WIND_SCREEN </Text_ID>

      <!-- ART -->
      <Land_Model_Name> ZB_Sky_Turret_Wind_Screen_B.alo </Land_Model_Name>
      <Scale_Factor> 1.4 </Scale_Factor>
      <AssetBank> BANK_MASARI </AssetBank>

      <BehaviorType Name="EncyclopediaBehaviorType">
         <Icon_Name> i_icon_mb_sky_guardian1_wind_screen.tga </Icon_Name>
      </BehaviorType>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_LIGHT_WIND_SCREEN </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>
        <Tooltip_Good_Against> TEXT_TYPE_VERSUS_AIR_UNITS </Tooltip_Good_Against>
        <Tooltip_Vulnerable_To> TEXT_TYPE_VERSUS_VEHICLES </Tooltip_Vulnerable_To>

         <!-- If this guy modifies its parent he must have the text ID that should be used!.  We set the modified descriptions in the
            hard point's data given that they are the ones MODIFYING the parent's data tooltip data. -->
         <Modified_Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_W_WIND_SCREEN </Modified_Tooltip_Description_Text_ID>
      </BehaviorType>

      <BehaviorType Name="BuildableObjectBehaviorType">
         <Tactical_Buildable_Constructed>Masari_Sky_Guardian_Wind_Screen</Tactical_Buildable_Constructed>
         <Tactical_Build_Cost_Multiplayer> 50 </Tactical_Build_Cost_Multiplayer>
         <Tactical_Build_Cost_Campaign> 50 </Tactical_Build_Cost_Campaign>
         <Tactical_Build_Time_Seconds> 40 </Tactical_Build_Time_Seconds>
      </BehaviorType>

      <Attributes SubObjectList="Yes">
         <Hardpoint_Upgrade_Rate> -0.25 </Hardpoint_Upgrade_Rate>
      </Attributes>

      <!-- Maria 08.09.2006  We want this object to be buildable -->
      <BehaviorType Name="ProductionBehaviorType">
         <Is_Research_Tech_Tree_Lockable> Yes </Is_Research_Tech_Tree_Lockable>
      </BehaviorType>

      <BehaviorType Name="HardPointBehaviorType">
         <HP_Type> HARD_POINT_DUMMY_ART </HP_Type>
         <HP_Replacement_Object_Type_When_Destroyed>  </HP_Replacement_Object_Type_When_Destroyed>
         <HP_Single_Destruction_Destroys_Parent> No </HP_Single_Destruction_Destroys_Parent>
         <HP_Parent_Takes_Damage>true</HP_Parent_Takes_Damage>
      </BehaviorType>

   </HardPoint>




   <!-- **************************************************************************************** -->
   <!-- *** VARIANTS *************************************************************************** -->
   <!-- **************************************************************************************** -->





   <!-- ********************************** Fire *************************************** -->

   <X13_Masari_Structures Name="Masari_Sky_Guardian_Fire">
      <Variant_Of_Existing_Type> Masari_Sky_Guardian </Variant_Of_Existing_Type>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <!-- ATTRIBUTES -->
      <Attributes SubObjectList="Yes">
         <Effect_Damage_Amount>35.0</Effect_Damage_Amount>
      </Attributes>

      <Land_FOW_Reveal_Range>275.0</Land_FOW_Reveal_Range>

      <BehaviorType Name="WeaponBehaviorType">
         <Can_Attack_Without_Weapon_Behavior> true </Can_Attack_Without_Weapon_Behavior>
         <Targeting_Stickiness_Time_Threshold>5.0</Targeting_Stickiness_Time_Threshold>
         <Targeting_Priority_Set> Masari_Sky_Guardian_Target_Priority </Targeting_Priority_Set>
         <Targeting_Fire_Inaccuracy> 1.0 </Targeting_Fire_Inaccuracy>
         <Targeting_Min_Attack_Distance> 40.0 </Targeting_Min_Attack_Distance>
         <Targeting_Max_Attack_Distance> 255.0 </Targeting_Max_Attack_Distance>
      </BehaviorType>

      <BehaviorType Name="GroundStructureBehaviorType">
         <Is_Buildable_By_Constructor> false </Is_Buildable_By_Constructor>
      </BehaviorType>

      <BehaviorType Name="TypeSwitchBehaviorType">
      </BehaviorType>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_LIGHT </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>

         <!--  MARIA: We need to know if the structure's tooltip must be modified by its hps (upgrades).
               NOTE: this flag defaults to No -->
         <HP_Attachment_Modifies_Tooltip> Yes </HP_Attachment_Modifies_Tooltip>
      </BehaviorType>

      <BehaviorType Name="SwitchTypeBehaviorType">
         <Keep_Hardpoints_On_Switch> true </Keep_Hardpoints_On_Switch>
      </BehaviorType>

      <Unit_Abilities_Data SubObjectList="Yes" Replace="No">

         <Unit_Ability Name="Sky_Guardian_Light_Beam">
            <Type>EFFECT_GENERATOR</Type>
            <Expiration_Seconds> 9999999.0 </Expiration_Seconds>
            <Recharge_Seconds>0.0</Recharge_Seconds>
            <GUI_Activated_Ability_Name> Sky_Guardian_Light_Beam_Ability </GUI_Activated_Ability_Name>
            <Effect_Generator_Name> SkyGuardianLightBeamGenerator </Effect_Generator_Name>
         </Unit_Ability>

      </Unit_Abilities_Data>


      <Abilities SubObjectList="Yes" Replace="No">

         <Effect_Generator_Ability Name="Sky_Guardian_Light_Beam_Ability">
            <Activation_Style>SPECIAL_ATTACK</Activation_Style>
            <Activation_Min_Range> 40.0 </Activation_Min_Range>
            <Activation_Max_Range> 255.0 </Activation_Max_Range>
            <Effect_Generator_Name> SkyGuardianLightBeamGenerator </Effect_Generator_Name>
            <Generating_Anim_Speedup> 1.0 </Generating_Anim_Speedup>
            <Generating_Anim_Type> Anim_Attack </Generating_Anim_Type>
				<!-- Max Channel must be > Activation_Max_Range -->
            <Max_Channel_Range> 275.0 </Max_Channel_Range>

            <Point_Turret_At_Target>Yes </Point_Turret_At_Target>

            <Excluded_Unit_Categories> DummyTarget, Resource, Resource_INST </Excluded_Unit_Categories>
            <Deactivate_On_User_Attack_Order> true </Deactivate_On_User_Attack_Order>
            <Deactivate_On_User_Move_Order> false </Deactivate_On_User_Move_Order>
            <Terminate_Effect_On_Move_Command> false </Terminate_Effect_On_Move_Command>

         </Effect_Generator_Ability>

      </Abilities>

      <Effect_Generator_Data SubObjectList="Yes" Replace="No">

         <Effect_Generator Name="SkyGuardianLightBeamGenerator">
				<Should_Deactivate_Manually> true </Should_Deactivate_Manually>
				<Keep_Target_On_Refresh>Yes</Keep_Target_On_Refresh>
				<Modal_Refresh_Frequency>1.0</Modal_Refresh_Frequency>

				<Effect_Generator_Entry Name="Entry1">
               <Effect_Name> SkyGuardianLightBeamEffect </Effect_Name>
					<Duration> 1.1 </Duration>
					<Target_Gathering_Mask> Target </Target_Gathering_Mask>
               <Source_SFX_Event> SFX_Alien_Energy_Fire </Source_SFX_Event>
               <Source_SFX_Loop_Type>ResonanceBeamWeaponEffectSFX</Source_SFX_Loop_Type>
               <Stop_Source_SFX_On_Deactivate> true </Stop_Source_SFX_On_Deactivate>
               <Target_SFX_Event> SFX_Alien_Radiation_Detonation_1 </Target_SFX_Event>
               <Target_Filter_Categories> Flying </Target_Filter_Categories>
               <Target_Filter_C> Is_Enemy </Target_Filter_C>
					<Frames_Between_Remove_Invalid_Targets> 5 </Frames_Between_Remove_Invalid_Targets>
				</Effect_Generator_Entry>

            <Effect_Generator_Entry Name="Entry2">
               <Effect_Name> MasariPurifyingLightEffect </Effect_Name>
               <Duration> 5.0 </Duration>
               <Target_Gathering_Mask> Target </Target_Gathering_Mask>
               <Should_Add_All_Team_Members_As_Targets> false </Should_Add_All_Team_Members_As_Targets>
               <Should_Add_Team_Container_As_Target> false </Should_Add_Team_Container_As_Target>
               <Remove_On_Death> false </Remove_On_Death>
               <Disable_Entry_Attribute> Is_Mind_Controlled </Disable_Entry_Attribute>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <Effect_Generator Name="SkyGuardianFireVisualGenerator">
            <Starts_Active> true </Starts_Active>

            <Effect_Generator_Entry Name="Entry1">
               <Effect_Name> SkyGuardianFireVisualEffect </Effect_Name>
               <Duration> -1.0 </Duration>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <!-- Standard DMA generator - Oksana 05/14/2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Masari_DMA\MASARI_DMA_Light_Mode_Generators.xml" -->


         <Effect_Generator Name="MasariResearchBurningAuraEffectGenerator">
            <Should_Deactivate_Manually> false </Should_Deactivate_Manually>
            <Modal_Refresh_Frequency> 2.0 </Modal_Refresh_Frequency>
            <Starts_Active> true </Starts_Active>

            <Effect_Generator_Entry Name="Entry1">
               <Effect_Name> MasariResearchBurningAuraEffect </Effect_Name>
               <Duration> 1.8 </Duration>
               <Target_Gathering_Mask> SelfAE </Target_Gathering_Mask>
               <Target_Filter_Categories>~DeathCloneResource</Target_Filter_Categories>
               <Target_Filter_C> Is_Enemy </Target_Filter_C>
               <Area_Effect_Radius> 100.0 </Area_Effect_Radius>
            </Effect_Generator_Entry>

            <Effect_Generator_Entry Name="Entry2">
               <Effect_Name> MasariResearchBurningAuraSelfEffect </Effect_Name>
               <Duration> 2.1 </Duration>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <!-- Standard generator for structures with upgrades being built - Maria 06.09.2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Generic_Upgrading_Structure_Effects\Generic_Upgrading_Structure_Generators.xml" -->

      </Effect_Generator_Data>

   </X13_Masari_Structures>








   <!-- ********************************** Ice *************************************** -->

   <X13_Masari_Structures Name="Masari_Sky_Guardian_Ice">
      <Variant_Of_Existing_Type> Masari_Sky_Guardian </Variant_Of_Existing_Type>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <Land_FOW_Reveal_Range>240.0</Land_FOW_Reveal_Range>

      <BehaviorType Name="GroundStructureBehaviorType">
         <Is_Buildable_By_Constructor> false </Is_Buildable_By_Constructor>
      </BehaviorType>

      <BehaviorType Name="WeaponBehaviorType">
         <Muzzle_Bone_Name> MuzzleB </Muzzle_Bone_Name>
         <Targeting_Stickiness_Time_Threshold>5.0</Targeting_Stickiness_Time_Threshold>
         <Targeting_Priority_Set> Masari_Sky_Guardian_Target_Priority </Targeting_Priority_Set>
         <Targeting_Fire_Inaccuracy> 1.0 </Targeting_Fire_Inaccuracy>
         <Targeting_Min_Attack_Distance> 40.0 </Targeting_Min_Attack_Distance>
         <Targeting_Max_Attack_Distance> 230.0 </Targeting_Max_Attack_Distance>

         <Projectile_Types>Proj_Sky_Guardian_Bolt</Projectile_Types>
         <Projectile_Fire_Recharge_Seconds> 2.0 </Projectile_Fire_Recharge_Seconds>
         <Projectile_Fire_Pulse_Count>1</Projectile_Fire_Pulse_Count>
         <Projectile_Fire_Pulse_Delay_Seconds>0.02</Projectile_Fire_Pulse_Delay_Seconds>

         <Projectile_Fire_Spread_Amount> 10 </Projectile_Fire_Spread_Amount>
         <Projectile_Fire_Spread_Angle> 15 </Projectile_Fire_Spread_Angle>
      </BehaviorType>

      <BehaviorType Name="TypeSwitchBehaviorType">
      </BehaviorType>

      <BehaviorType Name="TooltipBehaviorType">
         <Tooltip_Description_Text_ID> TEXT_TOOLTIP_DESCRIPTION_MASARI_SKY_GUARDIAN_DARK </Tooltip_Description_Text_ID>
         <Tooltip_Category> TEXT_TOOLTIP_CATEGORY_STRUCTURE </Tooltip_Category>

         <!--  MARIA: We need to know if the structure's tooltip must be modified by its hps (upgrades).
               NOTE: this flag defaults to No -->
         <HP_Attachment_Modifies_Tooltip> Yes </HP_Attachment_Modifies_Tooltip>
      </BehaviorType>

      <BehaviorType Name="SwitchTypeBehaviorType">
         <Keep_Hardpoints_On_Switch> true </Keep_Hardpoints_On_Switch>
      </BehaviorType>

      <Effect_Generator_Data SubObjectList="Yes" Replace="No">

         <Effect_Generator Name="SkyGuardianIceVisualGenerator">

            <Starts_Active> true </Starts_Active>

            <Effect_Generator_Entry Name="Entry1">
               <Effect_Name> SkyGuardianIceVisualEffect </Effect_Name>
               <Duration> -1.0 </Duration>
               <Target_Gathering_Mask> Self </Target_Gathering_Mask>
            </Effect_Generator_Entry>

         </Effect_Generator>

         <!-- Standard DMA generator - Oksana 05/14/2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Masari_DMA\MASARI_DMA_Dark_Mode_Generators_Structure.xml" -->

         <!-- Standard generator for structures with upgrades being built - Maria 06.09.2007 -->
         <!--INCLUDE ".\Data\XML\Includes\Generic_Upgrading_Structure_Effects\Generic_Upgrading_Structure_Generators.xml" -->

      </Effect_Generator_Data>

   </X13_Masari_Structures>





   <!-- ***************************** Wind screen ******************************* -->

   <X13_Masari_Structures Name="Invisible_Wind_Screen">
      <Text_ID>TEXT_NONE</Text_ID>
      <Land_Model_Name>ZB_Sky_Turret_Wind_Screen.alo</Land_Model_Name>
      <Scale_Factor>1.2</Scale_Factor>
      <Is_Decoration>No</Is_Decoration>
      <Collidable_By_Projectile_Living> Yes </Collidable_By_Projectile_Living>
      <Is_UI_Relevant> false </Is_UI_Relevant>
      <CategoryMask> Untargetable  </CategoryMask>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>
      <AssetBank> BANK_MASARI </AssetBank>

		<LandBehavior>
			REDIRECT_PROJECTILE
			HIDE_WHEN_FOGGED,
		</LandBehavior>

      <BehaviorType Name="RedirectProjectileBehaviorType">
         <Starting_Mode> Reflection </Starting_Mode>
         <Absorption_Gravitational_Constant> 25000 </Absorption_Gravitational_Constant>
         <Absorption_Terminal_Velocity> 10.0 </Absorption_Terminal_Velocity>
         <Absorption_Dampening_Coefficient> .9 </Absorption_Dampening_Coefficient>
         <Max_Redirected_Projectiles> 3 </Max_Redirected_Projectiles>
         <Redirection_Velocity> 15.0 </Redirection_Velocity>
         <Reflection_Chance> 0.5 </Reflection_Chance>
      </BehaviorType>

   </X13_Masari_Structures>




   <!-- ******************************* Projectiles ********************************** -->

   <Projectile Name="Proj_Sky_Guardian_Bolt">

      <!-- ART -->
      <Scale_Factor>1.0</Scale_Factor>
      <Land_Model_Name>Laser_Masari_Sky_Guardian_Dark_Bolt</Land_Model_Name>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Text_ID>TEXT_NONE</Text_ID>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <!-- MOVEMENT -->
      <Max_Speed>20.0</Max_Speed>
      <Max_Rate_Of_Turn>0.0</Max_Rate_Of_Turn>

      <!-- CONFLICT -->

      <!-- BEHAVIORS -->
      <Behavior>
         PROJECTILE,
         HIDE_WHEN_FOGGED,
         EFFECT_REGISTRY,
         EFFECT_GENERATOR
      </Behavior>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Damage_Type> Damage_Masari_Sky_Guardian_Dark </Damage_Type>
      </BehaviorType>

      <BehaviorType Name="AIBehaviorType">
         <AI_Combat_Power> 1 </AI_Combat_Power>
      </BehaviorType>

      <BehaviorType Name="SFXBehaviorType">
         <Projectile_SFXEvent_Detonate />
         <Projectile_SFXEvent_Detonate_Reduced_By_Armor> SFX_Military_Small_Damage_Detonation </Projectile_SFXEvent_Detonate_Reduced_By_Armor>
      </BehaviorType>

      <BehaviorType Name="ProjectileBehaviorType">
         <Projectile_Damages_Random_Hard_Points>No</Projectile_Damages_Random_Hard_Points>
         <Projectile_Category>DEFAULT</Projectile_Category>
         <Projectile_Max_Flight_Distance>5000.0</Projectile_Max_Flight_Distance>
         <Projectile_Damage>28.0</Projectile_Damage>
         <Projectile_Does_Shield_Damage>No</Projectile_Does_Shield_Damage>
         <Projectile_Does_Hitpoint_Damage>Yes</Projectile_Does_Hitpoint_Damage>
         <Projectile_Object_Detonation_Particle>Masari_Guardian_Dark_Det</Projectile_Object_Detonation_Particle>
         <Projectile_Object_Armor_Reduced_Detonation_Particle>Masari_Guardian_Dark_Det</Projectile_Object_Armor_Reduced_Detonation_Particle>
         <Projectile_Ground_Detonation_Particle>Masari_Guardian_Dark_Det_Ground</Projectile_Ground_Detonation_Particle>
         <Projectile_Lifetime_Detonation_Particle>Masari_Guardian_Dark_Det_Miss</Projectile_Lifetime_Detonation_Particle>
         <Projectile_Absorbed_By_Shields_Particle>Masari_Guardian_Dark_Det_Miss</Projectile_Absorbed_By_Shields_Particle>
         <Impact_Effect_Generator_Name>CripplingShotsImpactGenerator</Impact_Effect_Generator_Name>
       </BehaviorType>

      <Effect_Generator_Data SubObjectList="Yes" Replace="False">

         <Effect_Generator Name="SkyGuardianImpactGenerator">
            <Should_Deactivate_Manually> false </Should_Deactivate_Manually>

            <Effect_Generator_Entry Name="Entry1">
               <Effect_Name> MasariCripplingShotsEffect </Effect_Name>
               <Duration> 5.0 </Duration>
               <Target_Gathering_Mask> Target </Target_Gathering_Mask>
               <Target_Filter_C> Crippling_Shots_Target </Target_Filter_C>
               <Should_Add_All_Team_Members_As_Targets> false </Should_Add_All_Team_Members_As_Targets>
               <Should_Add_Team_Container_As_Target> false </Should_Add_Team_Container_As_Target>
               <Remove_On_Death> false </Remove_On_Death>
               <Linked_Effect_Names> CripplingShotsVisualEffect </Linked_Effect_Names>
            </Effect_Generator_Entry>

         </Effect_Generator>

      </Effect_Generator_Data>

   </Projectile>



   <Projectile Name="Proj_Masari_Sky_Guardian_Gust">
      <!-- ART -->
      <Land_Model_Name>w_invisible_bone.alo</Land_Model_Name>
      <Scale_Factor>1.0</Scale_Factor>
      <AssetBank> BANK_MASARI </AssetBank>

      <!-- INTERFACE -->
      <Text_ID>TEXT_NONE</Text_ID>
      <Is_Placed_By_Editor>false</Is_Placed_By_Editor>

      <!-- MOVEMENT -->
      <Max_Speed>35</Max_Speed>
      <Max_Rate_Of_Turn>0</Max_Rate_Of_Turn>

      <!-- CONFLICT -->
      <AI_Combat_Power> 1 </AI_Combat_Power>

      <!-- BEHAVIORS -->
      <Behavior>
         PROJECTILE,
         HIDE_WHEN_FOGGED,
         EFFECT_GENERATOR
      </Behavior>

      <BehaviorType Name="ArmorAndDamageBehaviorType">
         <Damage_Type> Damage_Masari_Skylord_Screech </Damage_Type>
      </BehaviorType>

      <BehaviorType Name="ProjectileBehaviorType">
         <Projectile_Category>DEFAULT</Projectile_Category>
         <!-- explode immediately-->
         <Projectile_Max_Flight_Distance>0.0</Projectile_Max_Flight_Distance>
         <Projectile_SFXEvent_Detonate>SFX_Masari_Detonation_1</Projectile_SFXEvent_Detonate>
         <Projectile_SFXEvent_Detonate_Reduced_By_Armor> SFX_Masari_Small_Damage_Detonation </Projectile_SFXEvent_Detonate_Reduced_By_Armor>
         <Projectile_Does_Shield_Damage>No</Projectile_Does_Shield_Damage>
         <Projectile_Does_Hitpoint_Damage>No</Projectile_Does_Hitpoint_Damage>
         <!-- Oksana: this stun only prevents weapon behavior from firing -->
         <Projectile_Stun_On_Detonation>Yes</Projectile_Stun_On_Detonation>
         <Projectile_Stun_Radius>200</Projectile_Stun_Radius>
         <Projectile_Stun_Duration_Seconds>5.0</Projectile_Stun_Duration_Seconds>
         <Projectile_Stun_Victims_Category_Mask>All</Projectile_Stun_Victims_Category_Mask>
         <Projectile_Stun_Victims_Unit_Types />

         <Projectile_Object_Detonation_Particle>Masari_skylord_screech</Projectile_Object_Detonation_Particle>
         <Projectile_Ground_Detonation_Particle>Masari_skylord_screech</Projectile_Ground_Detonation_Particle>
         <Projectile_Lifetime_Detonation_Particle>Masari_skylord_screech</Projectile_Lifetime_Detonation_Particle>
         <Projectile_Absorbed_By_Shields_Particle>Masari_skylord_screech</Projectile_Absorbed_By_Shields_Particle>
         <Can_Be_Redirected>False</Can_Be_Redirected>
      </BehaviorType>
   </Projectile>

</Masari_Sky_Guardian_XML>
